{"version":3,"file":"field-selector.bundle.js","sources":["../src/value/value-type.js","../src/value/base-collection.js","../src/value/integer-collection.js","../src/value/string-collection.js","../src/field-selector.js"],"sourcesContent":["export default class ValueType\n{\n\tstatic INTEGER = 'int';\n\tstatic STRING = 'string';\n\n\tstatic isValid(type: string): boolean\n\t{\n\t\treturn type === ValueType.INTEGER || type === ValueType.STRING;\n\t}\n}\n","import { Type } from 'main.core';\n\nexport class BaseCollection\n{\n\t#values: [] = [];\n\n\tconstructor()\n\t{\n\t\tthis.clear();\n\t}\n\n\tclear(): void\n\t{\n\t\tthis.#values = [];\n\t}\n\n\tset(rawValues: []): void\n\t{\n\t\tthis.#values = this.prepare(rawValues);\n\t}\n\n\tget(): []\n\t{\n\t\treturn this.#values;\n\t}\n\n\tprepare(rawValues: []): []\n\t{\n\t\tconst result = [];\n\t\trawValues.forEach((value): void => {\n\t\t\tif (!Type.isArray(value) || value.length !== 2)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.validateEntityId(value[0] ?? null))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.validateValue(value[1] ?? null))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresult.push(value);\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tvalidateEntityId(entityId): boolean\n\t{\n\t\treturn (Type.isStringFilled(entityId));\n\t}\n\n\tvalidateValue(value): boolean\n\t{\n\t\treturn false;\n\t}\n}\n","import { Type } from 'main.core';\nimport { BaseCollection } from './base-collection';\n\nexport class IntegerCollection extends BaseCollection\n{\n\tvalidateValue(value): boolean\n\t{\n\t\treturn Type.isInteger(value) && value > 0;\n\t}\n}\n","import { Type } from 'main.core';\nimport { BaseCollection } from './base-collection';\n\nexport class StringCollection extends BaseCollection\n{\n\tvalidateValue(value): boolean\n\t{\n\t\treturn Type.isString(value) && value.length > 0;\n\t}\n}\n","import { Dom, Tag, Text, Type } from 'main.core';\nimport { EventEmitter, type BaseEvent } from 'main.core.events';\nimport { type Item, type ItemId, TagSelector, type TagSelectorOptions, type EntityOptions } from 'ui.entity-selector';\nimport { FieldSelectorConfig } from './config/field-selector-config';\nimport { TabMessages } from './config/tab-messages';\nimport ValueType from './value/value-type';\nimport { BaseCollection } from './value/base-collection';\nimport { IntegerCollection } from './value/integer-collection';\nimport { StringCollection } from './value/string-collection';\n\nexport class FieldSelector\n{\n\t#state: boolean = true;\n\t#containerId: string = '';\n\t#fieldName: string = '';\n\t#multiple: boolean = false;\n\t#valueCollection: BaseCollection;\n\t#context: ?string = null;\n\t#entities: EntityOptions[] = [];\n\t#searchMessages: TabMessages = {};\n\t#changeEvents: string[] = [];\n\n\tconstructor(selectorConfig: FieldSelectorConfig)\n\t{\n\t\tconst config: FieldSelectorConfig = Type.isPlainObject(selectorConfig) ? selectorConfig : {};\n\n\t\tthis.initState();\n\n\t\tthis.setContainerId(config.containerId);\n\t\tthis.setFieldName(config.fieldName);\n\t\tthis.setMultiple(config.multiple);\n\n\t\tthis.setContext(config.context);\n\t\tthis.setEntities(config.entities);\n\n\t\tthis.initValueCollection(config.collectionType);\n\t\tif (!this.isStateSuccess())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.setValues(Type.isArray(config.selectedItems) ? config.selectedItems : [config.selectedItems]);\n\n\t\tthis.setSearchMessages(config.searchMessages);\n\t\tthis.setChangeEvents(config.changeEvents);\n\t}\n\n\tinitState(): void\n\t{\n\t\tthis.#state = true;\n\t}\n\n\tisStateSuccess(): boolean\n\t{\n\t\treturn this.#state;\n\t}\n\n\tshowError(error): void\n\t{\n\t\tthis.#state = false;\n\t\tif (Type.isStringFilled(error))\n\t\t{\n\t\t\tconsole.error(`BX.UI.FieldSelector: ${error}`);\n\t\t}\n\t}\n\n\tsetContainerId(containerId): void\n\t{\n\t\tthis.#containerId = Type.isStringFilled(containerId) ? containerId : '';\n\t\tif (this.#containerId === '')\n\t\t{\n\t\t\tthis.showError('containerId is empty. Selector is can\\'t be used');\n\t\t}\n\t}\n\n\tgetContainerId(): string\n\t{\n\t\treturn this.#containerId;\n\t}\n\n\tsetFieldName(fieldName): void\n\t{\n\t\tthis.#fieldName = Type.isStringFilled(fieldName) ? fieldName : '';\n\t\tif (this.#fieldName === '')\n\t\t{\n\t\t\tthis.showError('fieldName is empty. Selector is can\\'t be used');\n\t\t}\n\t}\n\n\tgetFieldName(): string\n\t{\n\t\treturn this.#fieldName;\n\t}\n\n\tsetMultiple(multiple): void\n\t{\n\t\tthis.#multiple = Type.isBoolean(multiple) ? multiple : false;\n\t}\n\n\tgetMultiple(): boolean\n\t{\n\t\treturn this.#multiple;\n\t}\n\n\tgetTagSelectorContainerId(): string\n\t{\n\t\treturn `${this.getContainerId()}_selector`;\n\t}\n\n\tgetTagResultContainerId(): string\n\t{\n\t\treturn `${this.getContainerId()}_results`;\n\t}\n\n\tgetTagSelectorControlId(): string\n\t{\n\t\treturn `${this.getContainerId()}Control`;\n\t}\n\n\tinitValueCollection(valueType: string): void\n\t{\n\t\tif (!ValueType.isValid(valueType))\n\t\t{\n\t\t\tthis.showError('Unknown value collection type. Selector is can\\'t be used');\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (valueType)\n\t\t{\n\t\t\tcase ValueType.STRING:\n\t\t\t\tthis.#valueCollection = new StringCollection();\n\t\t\t\tbreak;\n\t\t\tcase ValueType.INTEGER:\n\t\t\t\tthis.#valueCollection = new IntegerCollection();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetValues(rawValues: []): void\n\t{\n\t\tthis.#valueCollection.set(rawValues);\n\t}\n\n\tgetValues(): []\n\t{\n\t\treturn this.#valueCollection.get();\n\t}\n\n\tsetContext(context: ?string): void\n\t{\n\t\tthis.#context = context;\n\t}\n\n\tgetContext(): ?string\n\t{\n\t\treturn this.#context ?? null;\n\t}\n\n\tsetEntities(entities: EntityOptions[]): void\n\t{\n\t\tthis.#entities = [];\n\t\tif (!Type.isArrayFilled(entities))\n\t\t{\n\t\t\tthis.showError('Entity list is empty. Selector is can\\'t be used');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#entities = entities;\n\t}\n\n\tgetEntities(): EntityOptions[]\n\t{\n\t\treturn this.#entities;\n\t}\n\n\tsetSearchMessages(messages): void\n\t{\n\t\tif (Type.isPlainObject(messages))\n\t\t{\n\t\t\tthis.#searchMessages.title = Type.isStringFilled(messages.title) ? messages.title : '';\n\t\t\tthis.#searchMessages.subtitle = Type.isStringFilled(messages.subtitle) ? messages.subtitle : '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#searchMessages.title = '';\n\t\t\tthis.#searchMessages.subtitle = '';\n\t\t}\n\t}\n\n\tgetSearchTabTitle(): string\n\t{\n\t\treturn this.#searchMessages.title;\n\t}\n\n\tgetSearchSubtitle(): string\n\t{\n\t\treturn this.#searchMessages.subtitle;\n\t}\n\n\tsetChangeEvents(events): void\n\t{\n\t\tthis.#changeEvents = [];\n\t\tif (Type.isArrayFilled(events))\n\t\t{\n\t\t\tevents.forEach((value): void => {\n\t\t\t\tif (Type.isStringFilled(value))\n\t\t\t\t{\n\t\t\t\t\tthis.#changeEvents.push(value);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tgetChangeEvents(): string[]\n\t{\n\t\treturn this.#changeEvents;\n\t}\n\n\trender(): void\n\t{\n\t\tif (!this.isStateSuccess())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst containerId: string = this.getContainerId();\n\t\tconst container = document.getElementById(containerId);\n\t\tif (!Type.isElementNode(container))\n\t\t{\n\t\t\tthis.showError(`dom-container ${containerId} is absent. Selector is can't be used`);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst tagSelectorContainer = Tag.render`\n\t\t\t<div id=\"${this.getTagSelectorContainerId()}\"></div>\n\t\t`;\n\t\tDom.append(tagSelectorContainer, container);\n\n\t\tconst tagResult = Tag.render`\n\t\t\t<div id=\"${this.getTagResultContainerId()}\"></div>\n\t\t`;\n\t\tDom.append(tagResult, container);\n\n\t\tthis.renderSelectedItems(this.getValues());\n\n\t\tconst tagSelectorConfig: TagSelectorOptions = {\n\t\t\tid: this.getTagSelectorControlId(),\n\t\t\tmultiple: this.getMultiple(),\n\t\t\tdialogOptions: {\n\t\t\t\tid: this.getTagSelectorControlId(),\n\t\t\t\tcontext: this.getContext(),\n\t\t\t\tmultiple: this.getMultiple(),\n\t\t\t\tpreselectedItems: this.getValues(),\n\t\t\t\tentities: this.getEntities(),\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: false,\n\t\t\t\t},\n\t\t\t\tsearchTabOptions: {\n\t\t\t\t\tstub: true,\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Text.encode(this.getSearchTabTitle()),\n\t\t\t\t\t\tsubtitle: Text.encode(this.getSearchSubtitle()),\n\t\t\t\t\t\tarrow: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.updateSelectedItems.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.updateSelectedItems.bind(this),\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tconst tagSelector = new TagSelector(tagSelectorConfig);\n\t\ttagSelector.renderTo(tagSelectorContainer);\n\t}\n\n\trenderSelectedItems(items: ItemId[]): void\n\t{\n\t\tconst tagResult = document.getElementById(this.getTagResultContainerId());\n\t\tif (!Type.isDomNode(tagResult))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst fieldName = this.getFieldName();\n\t\ttagResult.innerHTML = '';\n\t\tif (items.length > 0)\n\t\t{\n\t\t\titems.forEach((value: ItemId): void => {\n\t\t\t\tconst hiddenValue = Tag.render`\n\t\t\t\t\t<input type=\"hidden\" name=\"${fieldName}\" value=\"${Tag.safe`${value[1].toString()}`}\">\n\t\t\t\t`;\n\t\t\t\tDom.append(hiddenValue, tagResult);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst emptyValue = Tag.render`\n\t\t\t\t<input type=\"hidden\" name=\"${fieldName}\" value=\"\">\n\t\t\t`;\n\t\t\tDom.append(emptyValue, tagResult);\n\t\t}\n\t}\n\n\tupdateSelectedItems(event: BaseEvent): void\n\t{\n\t\tconst dialog = event.getTarget();\n\t\tif (!dialog.isMultiple())\n\t\t{\n\t\t\tdialog.hide();\n\t\t}\n\n\t\tconst selectedItems = dialog.getSelectedItems();\n\t\tif (Type.isArray(selectedItems))\n\t\t{\n\t\t\tconst parsedValues = [];\n\t\t\tselectedItems.forEach((item: Item): void => {\n\t\t\t\tparsedValues.push([item.getEntityId(), item.getId()]);\n\t\t\t});\n\t\t\tthis.setValues(parsedValues);\n\t\t\tthis.renderSelectedItems(parsedValues);\n\t\t\tconst eventList: string[] = this.getChangeEvents();\n\t\t\teventList.forEach((changeEvent: string): void => {\n\t\t\t\tEventEmitter.emit(changeEvent);\n\t\t\t});\n\t\t}\n\t}\n}\n"],"names":["ValueType","isValid","type","INTEGER","STRING","BaseCollection","constructor","clear","set","rawValues","prepare","get","result","forEach","value","Type","isArray","length","validateEntityId","validateValue","push","entityId","isStringFilled","IntegerCollection","isInteger","StringCollection","isString","FieldSelector","selectorConfig","config","isPlainObject","initState","setContainerId","containerId","setFieldName","fieldName","setMultiple","multiple","setContext","context","setEntities","entities","initValueCollection","collectionType","isStateSuccess","setValues","selectedItems","setSearchMessages","searchMessages","setChangeEvents","changeEvents","showError","error","console","getContainerId","getFieldName","isBoolean","getMultiple","getTagSelectorContainerId","getTagResultContainerId","getTagSelectorControlId","valueType","getValues","getContext","isArrayFilled","getEntities","messages","title","subtitle","getSearchTabTitle","getSearchSubtitle","events","getChangeEvents","render","container","document","getElementById","isElementNode","tagSelectorContainer","Tag","Dom","append","tagResult","renderSelectedItems","tagSelectorConfig","id","dialogOptions","preselectedItems","searchOptions","allowCreateItem","searchTabOptions","stub","stubOptions","Text","encode","arrow","updateSelectedItems","bind","tagSelector","TagSelector","renderTo","items","isDomNode","innerHTML","hiddenValue","safe","toString","emptyValue","event","dialog","getTarget","isMultiple","hide","getSelectedItems","parsedValues","item","getEntityId","getId","eventList","changeEvent","EventEmitter","emit"],"mappings":"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"}