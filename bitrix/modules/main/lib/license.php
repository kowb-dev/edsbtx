<? namespace Bitrix\Main;$GLOBALS['____858543954']= array(base64_decode('ZmlsZ'.'V9leG'.'lzd'.'H'.'M='),base64_decode('c3R'.'ydG91'.'c'.'HBlcg'.'=='),base64_decode('bWQ'.'1'),base64_decode('bWQ1'),base64_decode('aW5fYXJyYXk='),base64_decode('aW5fYXJy'.'YXk'.'='),base64_decode('a'.'W5fY'.'XJ'.'yYXk'.'='),base64_decode('ZGVmaW5l'.'ZA=='),base64_decode('ZGVmaW'.'5lZA'.'='.'='),base64_decode('Z'.'G'.'Vm'.'a'.'W'.'5'.'lZA=='),base64_decode('ZmlsZV9le'.'Gl'.'z'.'dHM='),base64_decode('ZmlsZV9leGlzdHM='),base64_decode('ZmlsZV'.'9le'.'Glzd'.'HM='),base64_decode('Zmls'.'ZV9leGl'.'zd'.'HM='),base64_decode('ZXhwbG9kZQ'.'=='));if(!function_exists(__NAMESPACE__.'\\___1160838965')){function ___1160838965($_163128196){static $_1011325291= false; if($_1011325291 == false) $_1011325291=array('L2JpdHJpeC9saWNlbnNlX2tleS5'.'waHA'.'=','','','REVNTw'.'==','RE'.'VNTw==','QklUUklY','TElDRU5DRQ==',''.'REVNTw==','L'.'2'.'tl'.'e'.'V91cGRhdGUucGhw'.'P2xpY2V'.'uc2'.'Vf'.'a'.'2V5P'.'Q==','JnRvY'.'m'.'Fza2V0PXk'.'mbGFu'.'Zz0'.'=','cnU=','a3o=','Yn'.'k=','aHR0'.'cH'.'M6'.'L'.'y9kZX'.'YuMWM'.'tYml0cml4LnJ1L2'.'xlYXJuaW5'.'nL2N'.'v'.'d'.'XJzZS9'.'pbmRle'.'C5w'.'aHA/'.'Q'.'09VUlNFX0l'.'E'.'PTEzNSZM'.'RVNTT'.'05fSUQ9MjU3MjA=',''.'aHR0cHM6Ly90c'.'mFpbml'.'uZy5iaXRy'.'a'.'X'.'g'.'yNC'.'5j'.'b'.'2'.'0'.'vc'.'3VwcG'.'9ydC9'.'0'.'cmFpbmluZy9jb3V'.'yc2'.'UvaW'.'5'.'kZXguc'.'GhwP0N'.'PVVJ'.'TRV9JRD0xN'.'zgmTEVTU09'.'OX'.'0lEP'.'TI1O'.'TMyJk'.'xFU1NPTl9QQVR'.'I'.'PTE3'.'NTIwLj'.'E3N'.'T'.'YyLjI1OT'.'M'.'wL'.'jI1OT'.'My','cnU=','Ynk=',''.'a3o'.'=','Z'.'GU=','ZXU=','ZnI=','cG'.'w=','aX'.'Q'.'=',''.'dWs'.'=','ZX'.'U=','Y2'.'9'.'t','Z'.'W4=','REVNTw==','WQ='.'=','VElNRUxJTUl'.'U'.'X'.'0VE'.'SV'.'R'.'JT04=','WQ='.'=','R'.'U5DT0RF','WQ==','U2'.'l0'.'ZUV4cGlyZURhdG'.'U'.'=','bWFpbg==','fn'.'N1cHBvc'.'nRfZm'.'lua'.'XNoX'.'2RhdGU=','WS'.'1'.'tLWQ=',''.'W'.'S1tLWQ=',''.'Ym'.'l0cml4MjQ=','bWFpbg==','flBBU'.'kFN'.'X0NMSU'.'VOV'.'F9MQU5H','a'.'W50cmFuZXQ=','ZW'.'4=','cnU'.'=','b'.'WF'.'p'.'bg'.'==','d'.'mV'.'uZG9y',''.'Yml0'.'cml'.'4X3BvcnRhbA==',''.'ZW4=','M'.'WNf'.'Yml0cml4'.'X3BvcnRh'.'bA='.'=','cnU=','L2JpdH'.'JpeC9tb2R1'.'bG'.'VzL'.'21h'.'aW4'.'vb'.'GFuZ'.'y91YQ==','dWE=',''.'L2'.'J'.'pdH'.'JpeC9tb2'.'R1'.'b'.'GVz'.'L21ha'.'W4vb'.'GF'.'uZy9ieQ==','Ynk=','L2J'.'pdHJpe'.'C'.'9tb'.'2R1bGV'.'zL21haW4vbG'.'FuZy9'.'reg'.'==','a3'.'o=',''.'L2'.'Jpd'.'H'.'Jpe'.'C9tb2'.'R'.'1bGVz'.'L21'.'h'.'aW4vbG'.'F'.'uZy9y'.'d'.'Q==','cnU=','bW'.'F'.'p'.'bg==','flBBUkFN'.'X1BBUlRORVJfSUQ=','bW'.'Fp'.'bg==','UE'.'FSQ'.'U1fT'.'UFY'.'X1VTRVJ'.'T','b'.'WFpbg'.'='.'=','f'.'k'.'NP'.'VU5UX0V'.'YVFJB',''.'Tg==','W'.'Q==',''.'ZXh'.'0cm'.'FuZXQ=',''.'QU'.'5EI'.'FU'.'u'.'TEF'.'TVF9MT0dJTiA'.'+IA'.'==','QU'.'5'.'EIFUuTEF'.'TV'.'F9MT'.'0d'.'JTiBJUyBOT1QgTlVMTA==','aW5'.'0cmF'.'uZX'.'Q'.'=','ZXh'.'0cmFuZXQ=','Z'.'Xh'.'0cmFuZXRfZ3Jv'.'dXA=','bWFpbg==','fmxp'.'Y2Vu'.'c2V'.'f'.'bmFtZQ==','bWF'.'p'.'bg==',''.'fmxpY2'.'Vu'.'c2'.'Vf'.'Y'.'29k'.'ZXM=','','L'.'A==');return base64_decode($_1011325291[$_163128196]);}}; use Bitrix\Main\Config\Option; use Bitrix\Main\Type\Date; final class License{ private?string $_1189442023= null; private const DOMAINS_STORE_LICENSE=[ 'ru' => 'https://util.1c-bitrix.ru', 'en' => 'https://util.bitrixsoft.com', 'kz' => 'https://util.1c-bitrix.kz', 'by' => 'https://util.1c-bitrix.by',]; public const URL_BUS_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_bus.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_bus.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_bus.pdf',]; public const URL_CP_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_cp.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_cp.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_cp.pdf', 'en' => 'https://www.bitrix24.com/eula/', 'br' => 'https://www.bitrix24.com.br/eula/', 'fr' => 'https://www.bitrix24.fr/eula/', 'pl' => 'https://www.bitrix24.pl/eula/', 'it' => 'https://www.bitrix24.it/eula/', 'la' => 'https://www.bitrix24.es/eula/',]; public const URL_RENEWAL_LICENSE=[ 'com' => 'https://store.bitrix24.com/profile/license-keys.php', 'eu' => 'https://store.bitrix24.eu/profile/license-keys.php', 'de' => 'https://store.bitrix24.de/profile/license-keys.php', 'ru' => 'https://www.1c-bitrix.ru/buy/products/b24.php#tab-section-2', 'by' => 'https://www.1c-bitrix.by/buy/products/b24.php#tab-section-2', 'kz' => 'https://www.1c-bitrix.kz/buy/products/b24.php#tab-section-2',]; public function getKey(): string{ if($this->_1189442023 === null){ $_172813706= Loader::getDocumentRoot(). ___1160838965(0); $LICENSE_KEY= ___1160838965(1); if($GLOBALS['____858543954'][0]($_172813706)){ include($_172813706);} $this->_1189442023=($LICENSE_KEY == ___1160838965(2) || $GLOBALS['____858543954'][1]($LICENSE_KEY) == ___1160838965(3)? ___1160838965(4): $LICENSE_KEY);} return $this->_1189442023;} public function getHashLicenseKey(): string{ return $GLOBALS['____858543954'][2]($this->getKey());} public function getPublicHashKey(): string{ return $GLOBALS['____858543954'][3](___1160838965(5). $this->getKey(). ___1160838965(6));} public function isDemoKey(): bool{ return $this->getKey() == ___1160838965(7);} public function getBuyLink(): string{ return $this->getDomainStoreLicense(). ___1160838965(8). $this->getHashLicenseKey(). ___1160838965(9). LANGUAGE_ID;} public function getDocumentationLink(): string{ $_966595189= $this->getRegion(); if($GLOBALS['____858543954'][4]($_966595189,[___1160838965(10), ___1160838965(11), ___1160838965(12)])){ return ___1160838965(13);} return ___1160838965(14);} public function getRenewalLink(): string{ $_966595189= $this->getRegion(); if($GLOBALS['____858543954'][5]($_966595189,[___1160838965(15), ___1160838965(16), ___1160838965(17), ___1160838965(18)])){ return self::URL_RENEWAL_LICENSE[$_966595189];} if($GLOBALS['____858543954'][6]($_966595189,[___1160838965(19), ___1160838965(20), ___1160838965(21), ___1160838965(22), ___1160838965(23)])){ return self::URL_RENEWAL_LICENSE[___1160838965(24)];} return self::URL_RENEWAL_LICENSE[___1160838965(25)];} public function getDomainStoreLicense(): string{ return self::DOMAINS_STORE_LICENSE[$this->getRegion()] ?? self::DOMAINS_STORE_LICENSE[___1160838965(26)];} public function isDemo(): bool{ return $GLOBALS['____858543954'][7](___1160838965(27)) && DEMO === ___1160838965(28);} public function isTimeBound(): bool{ return $GLOBALS['____858543954'][8](___1160838965(29)) && TIMELIMIT_EDITION === ___1160838965(30);} public function isEncoded(): bool{ return $GLOBALS['____858543954'][9](___1160838965(31)) && ENCODE === ___1160838965(32);} public function getExpireDate():?Date{ $_274726574= (int)($GLOBALS[___1160838965(33)] ??(1060/2-530)); if($_274726574>(1352/2-676)){ return Date::createFromTimestamp($_274726574);} return null;} public function getSupportExpireDate():?Date{ $_274726574= Option::get(___1160838965(34), ___1160838965(35)); if(Date::isCorrect($_274726574, ___1160838965(36))){ return new Date($_274726574, ___1160838965(37));} return null;} public function getRegion():?string{ if(Loader::includeModule(___1160838965(38))){ return \CBitrix24::getPortalZone();} $_966595189= Option::get(___1160838965(39), ___1160838965(40)); if(!empty($_966595189)){ return $_966595189;} $_966595189= $this->__914405477(); if(!empty($_966595189)){ return $_966595189;} return $this->__2013628958();} public function getEulaLink(): string{ if(ModuleManager::isModuleInstalled(___1160838965(41))){ return self::URL_CP_EULA[$this->getRegion()] ?? self::URL_CP_EULA[___1160838965(42)];} return self::URL_BUS_EULA[$this->getRegion()] ?? self::URL_BUS_EULA[___1160838965(43)];} private function __914405477():?string{ $_1322695822= Option::get(___1160838965(44), ___1160838965(45)); if($_1322695822 === ___1160838965(46)){ return ___1160838965(47);} if($_1322695822 === ___1160838965(48)){ return ___1160838965(49);} return null;} private function __2013628958():?string{ $_793526599= Application::getDocumentRoot(); if($GLOBALS['____858543954'][10]($_793526599. ___1160838965(50))){ return ___1160838965(51);} if($GLOBALS['____858543954'][11]($_793526599. ___1160838965(52))){ return ___1160838965(53);} if($GLOBALS['____858543954'][12]($_793526599. ___1160838965(54))){ return ___1160838965(55);} if($GLOBALS['____858543954'][13]($_793526599. ___1160838965(56))){ return ___1160838965(57);} return null;} public function getPartnerId(): int{ return (int)Option::get(___1160838965(58), ___1160838965(59),(1472/2-736));} public function getMaxUsers(): int{ return (int)Option::get(___1160838965(60), ___1160838965(61),(164*2-328));} public function isExtraCountable(): bool{ return Option::get(___1160838965(62), ___1160838965(63), ___1160838965(64)) === ___1160838965(65) && ModuleManager::isModuleInstalled(___1160838965(66));} public function getActiveUsersCount(Date $_2017881174= null): int{ $_1721644372= Application::getConnection(); $_1203262597= min(204,0,68); if($_2017881174 !== null){  $_635099786= ___1160838965(67).$_1721644372->getSqlHelper()->convertToDbDate($_2017881174);} else{  $_635099786= ___1160838965(68);} if(ModuleManager::isModuleInstalled(___1160838965(69))){ $_1145739586="
				SELECT COUNT(DISTINCT U.ID)
				FROM
					b_user U
					INNER JOIN b_user_field F ON F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
					INNER JOIN b_utm_user UF ON
						UF.FIELD_ID = F.ID
						AND UF.VALUE_ID = U.ID
						AND UF.VALUE_INT > 0
				WHERE U.ACTIVE = 'Y'
					{$_635099786}
			"; $_1203262597= (int)$_1721644372->queryScalar($_1145739586); $_1881494940= (int)Option::get(___1160838965(70), ___1160838965(71)); if($_1881494940>(1476/2-738) && $this->isExtraCountable()){ $_1145739586="
						SELECT COUNT(1)
						FROM
							b_user U
							INNER JOIN b_extranet_user EU ON EU.USER_ID = U.ID AND EU.CHARGEABLE = 'Y'
							INNER JOIN b_user_group UG ON UG.USER_ID = U.ID AND UG.GROUP_ID = {$_1881494940}
							LEFT JOIN (
								SELECT UF.VALUE_ID 
								FROM 
									b_user_field F
									INNER JOIN b_utm_user UF ON UF.FIELD_ID = F.ID AND UF.VALUE_INT > 0
								WHERE F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
							) D ON D.VALUE_ID = U.ID
						WHERE U.ACTIVE = 'Y'
							{$_635099786}
							AND D.VALUE_ID IS NULL
					"; $_1203262597 += (int)$_1721644372->queryScalar($_1145739586);}} return $_1203262597;}  public function getName(): string{ return Option::get(___1160838965(72), ___1160838965(73));}  public function getCodes(): array{ $_1484575130= Option::get(___1160838965(74), ___1160838965(75)); if($_1484575130 != ___1160838965(76)){ return $GLOBALS['____858543954'][14](___1160838965(77), $_1484575130);} return[];}}?>