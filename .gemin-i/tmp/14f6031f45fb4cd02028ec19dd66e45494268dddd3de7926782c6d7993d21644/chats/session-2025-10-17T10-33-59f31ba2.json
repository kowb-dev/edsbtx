{
  "sessionId": "59f31ba2-8ad4-4005-8e0e-12674bebc2ab",
  "projectHash": "14f6031f45fb4cd02028ec19dd66e45494268dddd3de7926782c6d7993d21644",
  "startTime": "2025-10-17T10:34:05.543Z",
  "lastUpdated": "2025-10-17T11:28:18.533Z",
  "messages": [
    {
      "id": "700b7526-c0d4-4cda-8155-3849e8e782ea",
      "timestamp": "2025-10-17T10:34:05.543Z",
      "type": "user",
      "content": "Отключи админ панель для всех пользователей кроме админа: Через PHP в шаблоне\nВ файле header.php вашего шаблона добавьте:\nphp<?php\n// Скрыть панель для всех, кроме администраторов\nglobal $USER;\nif (!$USER->IsAdmin()) {\n    $APPLICATION->ShowPanel = false;\n}\n?>"
    },
    {
      "id": "dad88cc9-7f67-49f1-8285-a1d900bf0016",
      "timestamp": "2025-10-17T10:34:12.766Z",
      "type": "gemini",
      "content": "",
      "toolCalls": [
        {
          "id": "glob-1760697250415-e8c418174a395",
          "name": "glob",
          "args": {
            "pattern": "**/header.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "glob-1760697250415-e8c418174a395",
                "name": "glob",
                "response": {
                  "output": "Found 67 file(s) matching \"**/header.php\" within /home/c/contes1u/btx.edsy.ru/public_html, sorted by modification time (newest first):\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/components/bitrix/calendar.grid/templates/.default/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/components/bitrix/calendar.interface.grid/templates/.default/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.eshop/install/wizards/bitrix/eshop/site/templates/eshop_bootstrap_v4/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.eshop/install/wizards/bitrix/eshop/site/templates/eshop_bootstrap_v4/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.eshop/install/wizards/bitrix/eshop/site/templates/eshop_bootstrap_v4/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.eshop/install/wizards/bitrix/eshop/site/templates/eshop_bootstrap/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.eshop/install/wizards/bitrix/eshop/site/templates/eshop_bootstrap/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.eshop/install/wizards/bitrix/eshop/site/templates/eshop_bootstrap/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.eshop/install/wizards/bitrix/eshop/site/templates/store_v3/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.eshop/install/wizards/bitrix/eshop/site/templates/store_v3/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.eshop/install/wizards/bitrix/eshop/site/templates/store_v3/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.sitecorporate/install/wizards/bitrix/corp_furniture/site/templates/furniture/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.sitecorporate/install/wizards/bitrix/corp_furniture/site/templates/furniture/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.sitecorporate/install/wizards/bitrix/corp_furniture/site/templates/furniture/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.sitecorporate/install/wizards/bitrix/corp_services/site/templates/corp_services/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.sitecorporate/install/wizards/bitrix/corp_services/site/templates/corp_services/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/bitrix.sitecorporate/install/wizards/bitrix/corp_services/site/templates/corp_services/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/calendar/install/components/bitrix/calendar.grid/templates/.default/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/calendar/install/components/bitrix/calendar.interface.grid/templates/.default/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/calendar/install/templates/calendar_sharing/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/im/install/templates/call_app/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/im/install/templates/desktop_app/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/landing/install/templates/landing24/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/learning/install/public/template/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/learning/install/public/template/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/learning/install/public/template/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/learning/install/public/templates/learning_10_0_0/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/learning/install/public/templates/learning_10_0_0/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/learning/install/public/templates/learning_10_0_0/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/mail/install/templates/mail_user/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/mail/install/templates/mail_user/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/mail/install/templates/mail_user/lang/kz/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/mail/install/templates/mail_user/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/main/install/bitrix/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/main/install/bitrix/templates/.default/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/main/install/bitrix/templates/.default/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/main/install/bitrix/templates/.default/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/mobileapp/templates/default_app/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/mobileapp/templates/default_app/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/mobileapp/templates/default_app/lang/kz/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/modules/mobileapp/templates/default_app/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/.default/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/.default/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/.default/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/calendar_sharing/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/eshop_bootstrap_v4/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/eshop_bootstrap_v4/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/eshop_bootstrap_v4/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/landing24/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/learning/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/learning/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/learning/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/mail_user/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/mail_user/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/mail_user/lang/kz/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/templates/mail_user/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/wizards/bitrix/eshop/site/templates/eshop_bootstrap_v4/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/wizards/bitrix/eshop/site/templates/eshop_bootstrap_v4/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/wizards/bitrix/eshop/site/templates/eshop_bootstrap_v4/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/wizards/bitrix/eshop/site/templates/eshop_bootstrap/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/wizards/bitrix/eshop/site/templates/eshop_bootstrap/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/wizards/bitrix/eshop/site/templates/eshop_bootstrap/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/wizards/bitrix/eshop/site/templates/store_v3/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/wizards/bitrix/eshop/site/templates/store_v3/lang/en/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/wizards/bitrix/eshop/site/templates/store_v3/lang/ru/header.php\n/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/header.php"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:34:12.766Z",
          "resultDisplay": "Found 67 matching file(s)",
          "displayName": "FindFiles",
          "description": "Efficiently finds files matching specific glob patterns (e.g., `src/**/*.ts`, `**/*.md`), returning absolute paths sorted by modification time (newest first). Ideal for quickly locating files based on their name or path structure, especially in large codebases.",
          "renderOutputAsMarkdown": true
        }
      ],
      "thoughts": [
        {
          "subject": "Considering Admin Access Restrictions",
          "description": "\\n\\n\n\nI've been analyzing the user's requirement. It seems they want to restrict access to the admin panel. They've provided code and indicated it should reside within the template's `header.php` file. My current focus is pinpointing the precise location of this crucial file within the Bitrix CMS structure, specifically the template directory. Once identified, I'll integrate the provided code snippet.",
          "timestamp": "2025-10-17T10:34:08.977Z"
        },
        {
          "subject": "Investigating Template Location",
          "description": "\\n\\n\n\nMy current thinking centers on locating the correct `header.php` file. Having reviewed the file structure assumptions, I'm now exploring the typical Bitrix template locations: `/bitrix/templates/` and `/local/templates/`. I plan to use `glob` to efficiently search these directories and quickly identify all `header.php` instances, so I can narrow down which one is the active template. Then I can verify my findings in the Bitrix configuration.",
          "timestamp": "2025-10-17T10:34:10.223Z"
        }
      ],
      "model": "gemini-2.5-pro",
      "tokens": {
        "input": 8494,
        "output": 6,
        "cached": 0,
        "thoughts": 173,
        "tool": 0,
        "total": 8673
      }
    },
    {
      "id": "d0ed3d9e-4660-477c-a906-f1082f0a6c2b",
      "timestamp": "2025-10-17T10:34:18.047Z",
      "type": "gemini",
      "content": "",
      "toolCalls": [
        {
          "id": "read_file-1760697258020-7bb88eec904b6",
          "name": "read_file",
          "args": {
            "limit": 20,
            "absolute_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/header.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "read_file-1760697258020-7bb88eec904b6",
                "name": "read_file",
                "response": {
                  "output": "\nIMPORTANT: The file content has been truncated.\nStatus: Showing lines 1-20 of 754 total lines.\nAction: To read more of the file, you can use the 'offset' and 'limit' parameters in a subsequent 'read_file' call. For example, to read the next section of the file, use offset: 20.\n\n--- FILE CONTENT (truncated) ---\n<?if(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();?>\n\n<?php\n\nif (!defined('DEFAULT_TEMPLATE_PATH')) {\n\tdefine('DEFAULT_TEMPLATE_PATH', '/local/templates/' . SITE_TEMPLATE_ID);\n}\n\n// Альтернативный вариант если SITE_TEMPLATE_ID не работает\nif (!defined('DEFAULT_TEMPLATE_PATH') || DEFAULT_TEMPLATE_PATH === '/local/templates/') {\n\tdefine('DEFAULT_TEMPLATE_PATH', '/local/templates/edsy_main');\n}\n?>\n<!DOCTYPE html>\n<html lang=\"ru\">\n<head>\n\t<?php\n\tuse Bitrix\\Main\\Page\\Asset;\n\t$APPLICATION->ShowHead();\n\t$APPLICATION->ShowHead();"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:34:18.047Z",
          "resultDisplay": "Read lines 1-20 of 754 from local/templates/edsy_main/header.php",
          "displayName": "ReadFile",
          "description": "Reads and returns the content of a specified file. If the file is large, the content will be truncated. The tool's response will clearly indicate if truncation has occurred and will provide details on how to read more of the file using the 'offset' and 'limit' parameters. Handles text, images (PNG, JPG, GIF, WEBP, SVG, BMP), and PDF files. For text files, it can read specific line ranges.",
          "renderOutputAsMarkdown": true
        }
      ],
      "thoughts": [
        {
          "subject": "Analyzing Template Files",
          "description": "I've narrowed the search for the relevant `header.php` file. The file paths suggest the active theme's template resides within the `local/templates` directory. Considering best practices for custom templates, this appears to be the most logical location.",
          "timestamp": "2025-10-17T10:34:16.377Z"
        },
        {
          "subject": "Identifying Active Theme Header",
          "description": "I'm now examining the `header.php` files to confirm the active theme. I'll compare the contents of `/home/c/contes1u/btx.edsy.ru/public_html/bitrix/header.php` with `/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/header.php`. The one in the `local` directory is the most promising, so I'll prioritize its analysis.",
          "timestamp": "2025-10-17T10:34:17.979Z"
        }
      ],
      "model": "gemini-2.5-pro",
      "tokens": {
        "input": 11672,
        "output": 42,
        "cached": 0,
        "thoughts": 209,
        "tool": 0,
        "total": 11923
      }
    },
    {
      "id": "f6b7a9f2-92dd-4fe1-8b57-8f1c872ead1d",
      "timestamp": "2025-10-17T10:34:27.366Z",
      "type": "gemini",
      "content": "",
      "toolCalls": [
        {
          "id": "read_file-1760697267332-5673cf531ff1b",
          "name": "read_file",
          "args": {
            "absolute_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/header.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "read_file-1760697267332-5673cf531ff1b",
                "name": "read_file",
                "response": {
                  "output": "<?if(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();?>\n\n<?php\n\nif (!defined('DEFAULT_TEMPLATE_PATH')) {\n\tdefine('DEFAULT_TEMPLATE_PATH', '/local/templates/' . SITE_TEMPLATE_ID);\n}\n\n// Альтернативный вариант если SITE_TEMPLATE_ID не работает\nif (!defined('DEFAULT_TEMPLATE_PATH') || DEFAULT_TEMPLATE_PATH === '/local/templates/') {\n\tdefine('DEFAULT_TEMPLATE_PATH', '/local/templates/edsy_main');\n}\n?>\n<!DOCTYPE html>\n<html lang=\"ru\">\n<head>\n\t<?php\n\tuse Bitrix\\Main\\Page\\Asset;\n\t$APPLICATION->ShowHead();\n\t$APPLICATION->ShowHead();\n\t?>\n    <title><?php $APPLICATION->ShowTitle(); ?></title>\n\n\t<?php\n\tAsset::getInstance()->addString('<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">');\n\t// Подключение jQuery из ядра Битрикса\n\tAsset::getInstance()->addJs(\"/bitrix/js/main/jquery/jquery-3.7.1.min.js\");\n\n\t// Preconnect для оптимизации загрузки шрифтов\n\tAsset::getInstance()->addString('<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">');\n\tAsset::getInstance()->addString('<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>');\n\n\t// Async загрузка шрифтов\n\tAsset::getInstance()->addString('<link href=\"https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap\" rel=\"stylesheet\">');\n\n\t// Preload основных стилей и скриптов\n//\tAsset::getInstance()->addString('<link rel=\"preload\" href=\"' . DEFAULT_TEMPLATE_PATH . '/css/main.css\" as=\"style\">');\n\tAsset::getInstance()->addString('<link rel=\"preload\" href=\"' . DEFAULT_TEMPLATE_PATH . '/js/main.js\" as=\"script\" crossorigin>');\n\n\t// Подключение основных стилей\n\tAsset::getInstance()->addCss(DEFAULT_TEMPLATE_PATH . \"/css/main.css\");\n\n\t// Подключение основных скриптов\n\tAsset::getInstance()->addString('<script type=\"module\" src=\"' . DEFAULT_TEMPLATE_PATH . '/js/main.js\"></script>');\n\n\n\t// Phosphor Icons\n\tAsset::getInstance()->addString('<link rel=\"stylesheet\" href=\"https://unpkg.com/@phosphor-icons/web@2.1.1/src/regular/style.css\">');\n\tAsset::getInstance()->addString('<link rel=\"stylesheet\" href=\"https://unpkg.com/@phosphor-icons/web@2.1.1/src/thin/style.css\">');\n\n\t// Inline critical CSS (для предотвращения FOUC и ускорения загрузки)\n\tAsset::getInstance()->addString('\n        <style>\n            :root {\n                --edsys-font-primary: \\'Open Sans\\', -apple-system, BlinkMacSystemFont, \\'Segoe UI\\', sans-serif;\n                --edsys-font-regular: 400;\n                --edsys-font-bold: 700;\n                --edsys-primary: #ff4757;\n                --edsys-white: #ffffff;\n                --edsys-text: #21242D;\n                --edsys-bg: #f5f5f7;\n                --edsys-border: #e0e0e0;\n                --container-max: min(103.2rem, 100vw - 2rem);\n                --container-padding: clamp(1rem, 3vw, 2rem);\n            }\n\n            * {\n                margin: 0;\n                padding: 0;\n                box-sizing: border-box;\n            }\n\n            body {\n                font-family: var(--edsys-font-primary);\n                font-weight: var(--edsys-font-regular);\n                line-height: 1.5;\n                color: var(--edsys-text);\n                background: var(--edsys-bg);\n                -webkit-font-smoothing: antialiased;\n                -moz-osx-font-smoothing: grayscale;\n            }\n\n            .edsys-header {\n                position: relative;\n                z-index: 1000;\n                background: var(--edsys-white);\n                border-bottom: 1px solid var(--edsys-border);\n            }\n\n            .edsys-header__container {\n                max-width: var(--container-max);\n                margin: 0 auto;\n            }\n\n            .edsys-megamenu,\n            .edsys-mobile-menu,\n            .edsys-mobile-catalog,\n            .edsys-overlay {\n                visibility: visible;\n            }\n        </style>\n    ');\n\t?>\n\t<?php $APPLICATION->IncludeFile('/local/templates/.default/include/catalog_styles.php'); ?>\n    <script>\n        window.SITE_CONFIG = {\n            ASSETS: {\n                logo: '/img/logo.svg',\n                heroVideo: '/img/hero-vid.jpg',\n                favicon: '/img/favicon.ico'\n            }\n        };\n    </script>\n</head>\n\n<body>\n<div id=\"panel\"><?php $APPLICATION->ShowPanel(); ?></div>\n<!-- Header -->\n<header class=\"edsys-header\">\n    <div class=\"edsys-header__container\">\n        <!-- Mobile Top Bar -->\n        <div class=\"edsys-header__mobile-top\">\n            <a href=\"https://wa.me/79999999999\" class=\"edsys-header__mobile-contact\" aria-label=\"WhatsApp\">\n                <i class=\"ph ph-thin ph-whatsapp-logo\"></i>\n            </a>\n\n            <div class=\"edsys-header__logo\">\n\t\t        <?php if($APPLICATION->GetCurPage() !== '/'): ?>\n                <a href=\"/\" class=\"edsys-header__logo-link\">\n\t\t\t        <?php endif; ?>\n                    <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/logo.svg\" alt=\"EDS\">\n                    <div class=\"edsys-header__title\">\n                        <span>ELECTRIC</span>\n                        <span>DISTRIBUTION</span>\n                        <span>SYSTEMS</span>\n                    </div>\n\t\t\t        <?php if($APPLICATION->GetCurPage() !== '/'): ?>\n                </a>\n\t        <?php endif; ?>\n            </div>\n\n            <a href=\"tel:+79105273538\" class=\"edsys-header__mobile-contact\" aria-label=\"Позвонить\">\n                <i class=\"ph ph-thin ph-phone\"></i>\n            </a>\n        </div>\n\n        <!-- Mobile Search Bar -->\n        <div class=\"edsys-header__mobile-search\">\n            <button class=\"edsys-header__mobile-search-btn\" data-action=\"toggle-catalog\" aria-label=\"Каталог\">\n                <i class=\"ph ph-list-magnifying-glass\"></i>\n            </button>\n\n            <div class=\"edsys-header__search\">\n                <form class=\"edsys-header__search-form\" action=\"#\" method=\"get\">\n                    <input type=\"search\" class=\"edsys-header__search-input\" placeholder=\"Поиск товара...\" name=\"q\"\n                           aria-label=\"Поиск товара\">\n                    <button type=\"submit\" class=\"edsys-header__search-btn\" aria-label=\"Найти\">\n                        <i class=\"ph ph-thin ph-magnifying-glass\"></i>\n                    </button>\n                </form>\n            </div>\n\n            <button class=\"edsys-header__mobile-hamburger\" data-action=\"toggle-menu\" aria-label=\"Меню\">\n                <i class=\"ph ph-thin ph-list\"></i>\n            </button>\n        </div>\n\n        <!-- Desktop Header -->\n        <div class=\"edsys-header__top\">\n            <!-- Logo -->\n            <div class=\"edsys-header__logo\">\n\t\t        <?php if($APPLICATION->GetCurPage() !== '/'): ?>\n                <a href=\"/\" class=\"edsys-header__logo-link\">\n\t\t\t        <?php endif; ?>\n                    <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/logo.svg\" alt=\"EDS\">\n                    <div class=\"edsys-header__title\">\n                        <span>ELECTRIC</span>\n                        <span>DISTRIBUTION</span>\n                        <span>SYSTEMS</span>\n                    </div>\n\t\t\t        <?php if($APPLICATION->GetCurPage() !== '/'): ?>\n                </a>\n\t        <?php endif; ?>\n            </div>\n\n            <!-- Catalog Button -->\n            <div class=\"edsys-header__catalog\">\n                <button class=\"edsys-header__catalog-btn\" id=\"catalogBtn\">\n                    <i class=\"ph ph-list-magnifying-glass\"></i>\n                    <span class=\"edsys-header__catalog-text\">КАТАЛОГ</span>\n                </button>\n            </div>\n\n            <!-- Search -->\n            <div class=\"edsys-header__search\">\n                <form class=\"edsys-header__search-form\" action=\"#\" method=\"get\">\n                    <input type=\"search\" class=\"edsys-header__search-input\" placeholder=\"Поиск товара...\" name=\"q\"\n                           aria-label=\"Поиск товара\">\n                    <button type=\"submit\" class=\"edsys-header__search-btn\" aria-label=\"Найти\">\n                        <i class=\"ph ph-thin ph-magnifying-glass\"></i>\n                    </button>\n                </form>\n            </div>\n\n            <!-- Actions -->\n            <div class=\"edsys-header__actions\">\n                <a href=\"#\" class=\"edsys-header__action\">\n                    <i class=\"ph ph-thin ph-package\"></i>\n                    <span class=\"edsys-header__action-text\">Заказы</span>\n                </a>\n                <a href=\"#\" class=\"edsys-header__action\">\n                    <i class=\"ph ph-thin ph-heart\"></i>\n                    <span class=\"edsys-header__action-text\">Избранное</span>\n                </a>\n                <a href=\"#\" class=\"edsys-header__action\">\n                    <i class=\"ph ph-thin ph-chart-bar\"></i>\n                    <span class=\"edsys-header__action-text\">Сравнение</span>\n                </a>\n                <?if ($USER->IsAuthorized()):?>\n                    <a href=\"/personal/profile/\" class=\"edsys-header__action\">\n                        <i class=\"ph ph-thin ph-user\"></i>\n                        <span class=\"edsys-header__action-text\">Аккаунт</span>\n                    </a>\n                <?else:?>\n                    <a href=\"/auth/\" class=\"edsys-header__action\">\n                        <i class=\"ph ph-thin ph-user\"></i>\n                        <span class=\"edsys-header__action-text\">Войти</span>\n                    </a>\n                <?endif;?>\n                <a href=\"#\" class=\"edsys-header__action\">\n                    <i class=\"ph ph-thin ph-shopping-cart\"></i>\n                    <span class=\"edsys-header__action-text\">Корзина</span>\n                </a>\n            </div>\n        </div>\n\n        <!-- Навигационное меню -->\n\t    <?$APPLICATION->IncludeComponent(\n\t\t    \"bitrix:menu\",\n\t\t    \"header_dropdown\",\n\t\t    array(\n\t\t\t    \"ROOT_MENU_TYPE\" => \"main\",\n\t\t\t    \"CHILD_MENU_TYPE\" => \"left\",\n\t\t\t    \"MAX_LEVEL\" => \"2\",\n\t\t\t    \"USE_EXT\" => \"Y\",\n\t\t\t    \"MENU_CACHE_TYPE\" => \"N\" // Отключаем кэш для тестирования\n\t\t    )\n\t    );?>\n\n    </div>\n</header>\n\n<?php\n// Определяем базовый URL для категорий\n$CATALOG_BASE_URL = \"https://btx.edsy.ru\";\n?>\n\n<div class=\"edsys-megamenu\" id=\"megaMenu\">\n    <div class=\"edsys-megamenu__container\">\n        <div class=\"edsys-megamenu__grid\">\n            <div class=\"edsys-megamenu__column\">\n                <ul>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/turovye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/turovye-distribyutory.jpeg\"\n                                 alt=\"Туровые дистрибьюторы\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Туровые дистрибьюторы\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/rjekovye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/rekovye-distribyutory.jpeg\"\n                                 alt=\"Рэковые дистрибьюторы\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Рэковые дистрибьюторы\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/vvod-ot-63a/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/vvod-ot-63a.jpeg\" alt=\"Ввод от 63A\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Ввод от 63A\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/ustrojstva-s-zashhitnymi-rele/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/ustroistva-s-zaschitnymi-rele.jpeg\"\n                                 alt=\"Устройства с защитными реле\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Устройства с защитными реле\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/seriya-black-edition/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/seriya-black-edition.jpeg\"\n                                 alt=\"Серия Black Edition\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Серия Black Edition\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/distribyutori-so-vstroennym-splitterom/\"\n                           class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/distribyutory-so-vstroennym-splitterom.jpeg\"\n                                 alt=\"Дистрибьюторы со встроенным сплиттером\" class=\"edsys-megamenu__image\" width=\"48\"\n                                 height=\"48\" loading=\"lazy\">\n                            Дистрибьюторы со встроенным сплиттером\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div class=\"edsys-megamenu__column\">\n                <ul>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-lebedochnye-digital/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-lebedochnye-cifrovye.jpeg\"\n                                 alt=\"Пульты лебедочные цифровые\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Пульты лебедочные цифровые\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-lebedochnye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-lebedochnye-analogovye.jpeg\"\n                                 alt=\"Пульты лебедочные аналоговые\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Пульты лебедочные аналоговые\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/art-net-dmx-konvertery/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/art-net-dmx-konvertery.jpeg\"\n                                 alt=\"Art-Net - DMX конвертеры\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Art-Net - DMX конвертеры\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/dmx-splitters/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/dmx-splittery.jpeg\" alt=\"DMX-сплиттеры\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            DMX-сплиттеры\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/dimmery/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/dimmery.jpeg\" alt=\"Диммеры\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Диммеры\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/sekvensory/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/sekvensory.jpeg\" alt=\"Секвенсоры\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Секвенсоры\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/svitchery/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/svitchery.jpeg\" alt=\"Свитчеры\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Свитчеры\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div class=\"edsys-megamenu__column\">\n                <ul>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/korobki-kommutatsionnye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/kommutacionnye-korobki.jpeg\"\n                                 alt=\"Коммутационные коробки\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Коммутационные коробки\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-knopochnye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-upravleniya.jpeg\"\n                                 alt=\"Пульты управления\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Пульты управления\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/easylink/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/ustroistva-peredachi-signala.jpeg\"\n                                 alt=\"Устройства передачи сигнала\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Устройства передачи сигнала\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/audio-devices/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/audio-izolyatory.jpeg\"\n                                 alt=\"Аудио изоляторы\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Аудиоустройства\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/paneli-rekovye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/rekovye-paneli.jpeg\"\n                                 alt=\"Рэковые панели\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Рэковые панели\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/rekovye-aksessuary/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/reki-i-aksessuary.jpeg\"\n                                 alt=\"Рэки и аксессуары\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Рэки и аксессуары\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/sistemy-podvesa/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/strubciny-i-trosik.jpeg\"\n                                 alt=\"Струбцины и тросики\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Струбцины и тросики\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div class=\"edsys-megamenu__column\">\n                <ul>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/lyuchki-sczenicheskie/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/scenicheskie-lyuchki.jpeg\"\n                                 alt=\"Сценические лючки\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Сценические лючки\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/nastolnye-lyuchki/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/nastolnye-lyuchki.jpeg\"\n                                 alt=\"Настольные лючки\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Настольные лючки\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/lyuchki-nastennye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/nast.-lyuchok-50piks.jpg\"\n                                 alt=\"Настенные лючки\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Настенные лючки\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/kabelnaya-produktsiya/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/kabelnaya-produkciya.jpeg\"\n                                 alt=\"Кабельная продукция\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Кабельная продукция\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/signalnaya-kommutatsiya/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/signalnaya-kommutaciya.jpeg\"\n                                 alt=\"Сигнальная коммутация\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Сигнальная коммутация\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/razemy-i-komponenty/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/razemy.jpeg\" alt=\"Разъемы\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Разъемы\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/soputstvuyushchie-tovary/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/soputstvuyuschie-tovary.jpeg\"\n                                 alt=\"Сопутствующие товары\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Сопутствующие товары\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\n<!-- Mobile Navigation -->\n<nav class=\"edsys-mobile-nav\">\n    <div class=\"edsys-mobile-nav__grid\">\n        <button class=\"edsys-mobile-nav__item\" data-action=\"toggle-catalog\">\n            <i class=\"ph ph-thin ph-list\"></i>\n            <span>Каталог</span>\n        </button>\n        <a href=\"#\" class=\"edsys-mobile-nav__item\">\n            <i class=\"ph ph-thin ph-package\"></i>\n            <span>Заказы</span>\n        </a>\n        <a href=\"#\" class=\"edsys-mobile-nav__item\">\n            <i class=\"ph ph-thin ph-heart\"></i>\n            <span>Избранное</span>\n        </a>\n        <a href=\"#\" class=\"edsys-mobile-nav__item\">\n            <i class=\"ph ph-thin ph-chart-bar\"></i>\n            <span>Сравнение</span>\n        </a>\n    </div>\n</nav>\n\n<!-- Mobile Menu -->\n<?php\n$APPLICATION->IncludeComponent(\n\t\"bitrix:menu\",\n\t\"mobile_dropdown\",\n\tarray(\n\t\t\"ROOT_MENU_TYPE\" => \"main\",\n\t\t\"CHILD_MENU_TYPE\" => \"left\",\n\t\t\"MAX_LEVEL\" => \"2\",\n\t\t\"USE_EXT\" => \"Y\",\n\t\t\"MENU_CACHE_TYPE\" => \"N\",\n\t\t\"MENU_CACHE_TIME\" => \"3600\",\n\t\t\"MENU_CACHE_USE_GROUPS\" => \"Y\",\n\t\t\"MENU_CACHE_GET_VARS\" => array(),\n\t\t\"COMPONENT_TEMPLATE\" => \"mobile_dropdown\"\n\t),\n\tfalse\n);\n?>\n\n<!-- Mobile Catalog -->\n<?php\n// Определяем базовый URL для категорий\n$CATALOG_BASE_URL = \"https://btx.edsy.ru\";\n?>\n\n<div class=\"edsys-mobile-catalog\" id=\"mobileCatalog\">\n    <div class=\"edsys-mobile-catalog__header\">\n        <!--        <h3>Все товары каталога</h3>-->\n        <button class=\"edsys-good__all\">все товары в таблице</button>\n        <button class=\"edsys-mobile-catalog__close\" data-action=\"toggle-catalog\">\n            <i class=\"ph ph-thin ph-x\"></i>\n        </button>\n    </div>\n    <ul class=\"edsys-mobile-catalog__list\">\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/turovye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/turovye-distribyutory.jpeg\"\n                     alt=\"Туровые дистрибьюторы\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Туровые дистрибьюторы\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/rjekovye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/rekovye-distribyutory.jpeg\"\n                     alt=\"Рэковые дистрибьюторы\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Рэковые дистрибьюторы\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/vvod-ot-63a/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/vvod-ot-63a.jpeg\" alt=\"Ввод от 63A\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Ввод от 63A\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/ustrojstva-s-zashhitnymi-rele/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/ustroistva-s-zaschitnymi-rele.jpeg\"\n                     alt=\"Устройства с защитными реле\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Устройства с защитными реле\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/seriya-black-edition/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/seriya-black-edition.jpeg\"\n                     alt=\"Серия Black Edition\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Серия Black Edition\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/distribyutori-so-vstroennym-splitterom/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/distribyutory-so-vstroennym-splitterom.jpeg\"\n                     alt=\"Дистрибьюторы со встроенным сплиттером\" class=\"edsys-mobile-catalog__icon\" width=\"24\"\n                     height=\"24\" loading=\"lazy\">\n                Дистрибьюторы со встроенным сплиттером\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-lebedochnye-digital/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-lebedochnye-cifrovye.jpeg\"\n                     alt=\"Пульты лебедочные цифровые\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Пульты лебедочные цифровые\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-lebedochnye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-lebedochnye-analogovye.jpeg\"\n                     alt=\"Пульты лебедочные аналоговые\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Пульты лебедочные аналоговые\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/art-net-dmx-konvertery/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/art-net-dmx-konvertery.jpeg\"\n                     alt=\"Art-Net - DMX конвертеры\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Art-Net - DMX конвертеры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/dmx-splitters/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/dmx-splittery.jpeg\" alt=\"DMX-сплиттеры\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                DMX-сплиттеры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/dimmery/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/dimmery.jpeg\" alt=\"Диммеры\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Диммеры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/sekvensory/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/sekvensory.jpeg\" alt=\"Секвенсоры\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Секвенсоры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/svitchery/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/svitchery.jpeg\" alt=\"Свитчеры\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Свитчеры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/korobki-kommutatsionnye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/kommutacionnye-korobki.jpeg\"\n                     alt=\"Коммутационные коробки\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Коммутационные коробки\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-knopochnye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-upravleniya.jpeg\" alt=\"Пульты управления\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Пульты управления\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/easylink/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/ustroistva-peredachi-signala.jpeg\"\n                     alt=\"Устройства передачи сигнала\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Устройства передачи сигнала\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/audio-devices/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/audio-izolyatory.jpeg\" alt=\"Аудио изоляторы\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Аудиоустройства\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/paneli-rekovye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/rekovye-paneli.jpeg\" alt=\"Рэковые панели\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Рэковые панели\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/rekovye-aksessuary/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/reki-i-aksessuary.jpeg\" alt=\"Рэки и аксессуары\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Рэки и аксессуары\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/sistemy-podvesa/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/strubciny-i-trosik.jpeg\" alt=\"Струбцины и тросики\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Струбцины и тросики\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/lyuchki-sczenicheskie/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/scenicheskie-lyuchki.jpeg\" alt=\"Сценические лючки\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Сценические лючки\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/nastolnye-lyuchki/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/nastolnye-lyuchki.jpeg\" alt=\"Настольные лючки\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Настольные лючки\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/lyuchki-nastennye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/nast.-lyuchok-50piks.jpg\" alt=\"Настенные лючки\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Настенные лючки\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/kabelnaya-produktsiya/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/kabelnaya-produkciya.jpeg\"\n                     alt=\"Кабельная продукция\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Кабельная продукция\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/signalnaya-kommutatsiya/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/signalnaya-kommutaciya.jpeg\"\n                     alt=\"Сигнальная коммутация\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Сигнальная коммутация\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/razemy-i-komponenty/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/razemy.jpeg\" alt=\"Разъемы\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Разъемы\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/soputstvuyushchie-tovary/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/soputstvuyuschie-tovary.jpeg\"\n                     alt=\"Сопутствующие товары\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Сопутствующие товары\n            </a>\n        </li>\n    </ul>\n</div>"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:34:27.366Z",
          "resultDisplay": "",
          "displayName": "ReadFile",
          "description": "Reads and returns the content of a specified file. If the file is large, the content will be truncated. The tool's response will clearly indicate if truncation has occurred and will provide details on how to read more of the file using the 'offset' and 'limit' parameters. Handles text, images (PNG, JPG, GIF, WEBP, SVG, BMP), and PDF files. For text files, it can read specific line ranges.",
          "renderOutputAsMarkdown": true
        }
      ],
      "thoughts": [
        {
          "subject": "Reviewing the File",
          "description": "I've confirmed the file is the expected Bitrix template, `header.php`. I've located the `ShowHead` call and am proceeding to analyze the file's content prior to integrating the user's code snippet. I intend to insert the code immediately before the closing tag I've identified.",
          "timestamp": "2025-10-17T10:34:26.740Z"
        },
        {
          "subject": "Examining the Code Placement",
          "description": "I've located the `</head>` tag. My next step involves preparing the provided code snippet for integration within the header file. I'll need to ensure proper formatting and syntax compatibility to prevent any rendering issues or conflicts.",
          "timestamp": "2025-10-17T10:34:27.307Z"
        }
      ],
      "model": "gemini-2.5-pro",
      "tokens": {
        "input": 11977,
        "output": 40,
        "cached": 0,
        "thoughts": 98,
        "tool": 0,
        "total": 12115
      }
    },
    {
      "id": "2a2e66b7-ab61-474f-b482-b8e3987ab058",
      "timestamp": "2025-10-17T10:34:44.659Z",
      "type": "gemini",
      "content": "",
      "toolCalls": [
        {
          "id": "replace-1760697273391-c5ccc0b626d32",
          "name": "replace",
          "args": {
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/header.php",
            "old_string": "<?if(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();?>\n\n<?php\n\nif (!defined('DEFAULT_TEMPLATE_PATH')) {\n\tdefine('DEFAULT_TEMPLATE_PATH', '/local/templates/' . SITE_TEMPLATE_ID);\n}\n\n// Альтернативный вариант если SITE_TEMPLATE_ID не работает\nif (!defined('DEFAULT_TEMPLATE_PATH') || DEFAULT_TEMPLATE_PATH === '/local/templates/') {\n\tdefine('DEFAULT_TEMPLATE_PATH', '/local/templates/edsy_main');\n}\n?>\n<!DOCTYPE html>\n<html lang=\"ru\">\n<head>\n\t<?php\n\tuse Bitrix\\Main\\Page\\Asset;\n\t$APPLICATION->ShowHead();\n\t$APPLICATION->ShowHead();\n\t?>\n    <title><?php $APPLICATION->ShowTitle(); ?></title>\n\n\t<?php\n\tAsset::getInstance()->addString('<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">');\n\t// Подключение jQuery из ядра Битрикса\n\tAsset::getInstance()->addJs(\"/bitrix/js/main/jquery/jquery-3.7.1.min.js\");\n\n\t// Preconnect для оптимизации загрузки шрифтов\n\tAsset::getInstance()->addString('<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">');\n\tAsset::getInstance()->addString('<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>');\n\n\t// Async загрузка шрифтов\n\tAsset::getInstance()->addString('<link href=\"https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap\" rel=\"stylesheet\">');\n\n\t// Preload основных стилей и скриптов\n//\tAsset::getInstance()->addString('<link rel=\"preload\" href=\"' . DEFAULT_TEMPLATE_PATH . '/css/main.css\" as=\"style\">');\n\tAsset::getInstance()->addString('<link rel=\"preload\" href=\"' . DEFAULT_TEMPLATE_PATH . '/js/main.js\" as=\"script\" crossorigin>');\n\n\t// Подключение основных стилей\n\tAsset::getInstance()->addCss(DEFAULT_TEMPLATE_PATH . \"/css/main.css\");\n\n\t// Подключение основных скриптов\n\tAsset::getInstance()->addString('<script type=\"module\" src=\"' . DEFAULT_TEMPLATE_PATH . '/js/main.js\"></script>');\n\n\n\t// Phosphor Icons\n\tAsset::getInstance()->addString('<link rel=\"stylesheet\" href=\"https://unpkg.com/@phosphor-icons/web@2.1.1/src/regular/style.css\">');\n\tAsset::getInstance()->addString('<link rel=\"stylesheet\" href=\"https://unpkg.com/@phosphor-icons/web@2.1.1/src/thin/style.css\">');\n\n\t// Inline critical CSS (для предотвращения FOUC и ускорения загрузки)\n\tAsset::getInstance()->addString('\n        <style>\n            :root {\n                --edsys-font-primary: \\'Open Sans\\', -apple-system, BlinkMacSystemFont, \\'Segoe UI\\', sans-serif;\n                --edsys-font-regular: 400;\n                --edsys-font-bold: 700;\n                --edsys-primary: #ff4757;\n                --edsys-white: #ffffff;\n                --edsys-text: #21242D;\n                --edsys-bg: #f5f5f7;\n                --edsys-border: #e0e0e0;\n                --container-max: min(103.2rem, 100vw - 2rem);\n                --container-padding: clamp(1rem, 3vw, 2rem);\n            }\n\n            * {\n                margin: 0;\n                padding: 0;\n                box-sizing: border-box;\n            }\n\n            body {\n                font-family: var(--edsys-font-primary);\n                font-weight: var(--edsys-font-regular);\n                line-height: 1.5;\n                color: var(--edsys-text);\n                background: var(--edsys-bg);\n                -webkit-font-smoothing: antialiased;\n                -moz-osx-font-smoothing: grayscale;\n            }\n\n            .edsys-header {\n                position: relative;\n                z-index: 1000;\n                background: var(--edsys-white);\n                border-bottom: 1px solid var(--edsys-border);\n            }\n\n            .edsys-header__container {\n                max-width: var(--container-max);\n                margin: 0 auto;\n            }\n\n            .edsys-megamenu,\n            .edsys-mobile-menu,\n            .edsys-mobile-catalog,\n            .edsys-overlay {\n                visibility: visible;\n            }\n        </style>\n    ');\n\t?>\n\t<?php $APPLICATION->IncludeFile('/local/templates/.default/include/catalog_styles.php'); ?>\n    <script>\n        window.SITE_CONFIG = {\n            ASSETS: {\n                logo: '/img/logo.svg',\n                heroVideo: '/img/hero-vid.jpg',\n                favicon: '/img/favicon.ico'\n            }\n        };\n    </script>\n</head>\n\n<body>\n<div id=\"panel\"><?php $APPLICATION->ShowPanel(); ?></div>\n<!-- Header -->\n<header class=\"edsys-header\">\n    <div class=\"edsys-header__container\">\n        <!-- Mobile Top Bar -->\n        <div class=\"edsys-header__mobile-top\">\n            <a href=\"https://wa.me/79999999999\" class=\"edsys-header__mobile-contact\" aria-label=\"WhatsApp\">\n                <i class=\"ph ph-thin ph-whatsapp-logo\"></i>\n            </a>\n\n            <div class=\"edsys-header__logo\">\n\t\t        <?php if($APPLICATION->GetCurPage() !== '/'): ?>\n                <a href=\"/\" class=\"edsys-header__logo-link\">\n\t\t\t        <?php endif; ?>\n                    <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/logo.svg\" alt=\"EDS\">\n                    <div class=\"edsys-header__title\">\n                        <span>ELECTRIC</span>\n                        <span>DISTRIBUTION</span>\n                        <span>SYSTEMS</span>\n                    </div>\n\t\t\t        <?php if($APPLICATION->GetCurPage() !== '/'): ?>\n                </a>\n\t        <?php endif; ?>\n            </div>\n\n            <a href=\"tel:+79105273538\" class=\"edsys-header__mobile-contact\" aria-label=\"Позвонить\">\n                <i class=\"ph ph-thin ph-phone\"></i>\n            </a>\n        </div>\n\n        <!-- Mobile Search Bar -->\n        <div class=\"edsys-header__mobile-search\">\n            <button class=\"edsys-header__mobile-search-btn\" data-action=\"toggle-catalog\" aria-label=\"Каталог\">\n                <i class=\"ph ph-list-magnifying-glass\"></i>\n            </button>\n\n            <div class=\"edsys-header__search\">\n                <form class=\"edsys-header__search-form\" action=\"#\" method=\"get\">\n                    <input type=\"search\" class=\"edsys-header__search-input\" placeholder=\"Поиск товара...\" name=\"q\"\n                           aria-label=\"Поиск товара\">\n                    <button type=\"submit\" class=\"edsys-header__search-btn\" aria-label=\"Найти\">\n                        <i class=\"ph ph-thin ph-magnifying-glass\"></i>\n                    </button>\n                </form>\n            </div>\n\n            <button class=\"edsys-header__mobile-hamburger\" data-action=\"toggle-menu\" aria-label=\"Меню\">\n                <i class=\"ph ph-thin ph-list\"></i>\n            </button>\n        </div>\n\n        <!-- Desktop Header -->\n        <div class=\"edsys-header__top\">\n            <!-- Logo -->\n            <div class=\"edsys-header__logo\">\n\t\t        <?php if($APPLICATION->GetCurPage() !== '/'): ?>\n                <a href=\"/\" class=\"edsys-header__logo-link\">\n\t\t\t        <?php endif; ?>\n                    <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/logo.svg\" alt=\"EDS\">\n                    <div class=\"edsys-header__title\">\n                        <span>ELECTRIC</span>\n                        <span>DISTRIBUTION</span>\n                        <span>SYSTEMS</span>\n                    </div>\n\t\t\t        <?php if($APPLICATION->GetCurPage() !== '/'): ?>\n                </a>\n\t        <?php endif; ?>\n            </div>\n\n            <!-- Catalog Button -->\n            <div class=\"edsys-header__catalog\">\n                <button class=\"edsys-header__catalog-btn\" id=\"catalogBtn\">\n                    <i class=\"ph ph-list-magnifying-glass\"></i>\n                    <span class=\"edsys-header__catalog-text\">КАТАЛОГ</span>\n                </button>\n            </div>\n\n            <!-- Search -->\n            <div class=\"edsys-header__search\">\n                <form class=\"edsys-header__search-form\" action=\"#\" method=\"get\">\n                    <input type=\"search\" class=\"edsys-header__search-input\" placeholder=\"Поиск товара...\" name=\"q\"\n                           aria-label=\"Поиск товара\">\n                    <button type=\"submit\" class=\"edsys-header__search-btn\" aria-label=\"Найти\">\n                        <i class=\"ph ph-thin ph-magnifying-glass\"></i>\n                    </button>\n                </form>\n            </div>\n\n            <!-- Actions -->\n            <div class=\"edsys-header__actions\">\n                <a href=\"#\" class=\"edsys-header__action\">\n                    <i class=\"ph ph-thin ph-package\"></i>\n                    <span class=\"edsys-header__action-text\">Заказы</span>\n                </a>\n                <a href=\"#\" class=\"edsys-header__action\">\n                    <i class=\"ph ph-thin ph-heart\"></i>\n                    <span class=\"edsys-header__action-text\">Избранное</span>\n                </a>\n                <a href=\"#\" class=\"edsys-header__action\">\n                    <i class=\"ph ph-thin ph-chart-bar\"></i>\n                    <span class=\"edsys-header__action-text\">Сравнение</span>\n                </a>\n                <?if ($USER->IsAuthorized()):?>\n                    <a href=\"/personal/profile/\" class=\"edsys-header__action\">\n                        <i class=\"ph ph-thin ph-user\"></i>\n                        <span class=\"edsys-header__action-text\">Аккаунт</span>\n                    </a>\n                <?else:?>\n                    <a href=\"/auth/\" class=\"edsys-header__action\">\n                        <i class=\"ph ph-thin ph-user\"></i>\n                        <span class=\"edsys-header__action-text\">Войти</span>\n                    </a>\n                <?endif;?>\n                <a href=\"#\" class=\"edsys-header__action\">\n                    <i class=\"ph ph-thin ph-shopping-cart\"></i>\n                    <span class=\"edsys-header__action-text\">Корзина</span>\n                </a>\n            </div>\n        </div>\n\n        <!-- Навигационное меню -->\n\t    <?$APPLICATION->IncludeComponent(\n\t\t    \"bitrix:menu\",\n\t\t    \"header_dropdown\",\n\t\t    array(\n\t\t\t    \"ROOT_MENU_TYPE\" => \"main\",\n\t\t\t    \"CHILD_MENU_TYPE\" => \"left\",\n\t\t\t    \"MAX_LEVEL\" => \"2\",\n\t\t\t    \"USE_EXT\" => \"Y\",\n\t\t\t    \"MENU_CACHE_TYPE\" => \"N\" // Отключаем кэш для тестирования\n\t\t    )\n\t    );?>\n\n    </div>\n</header>\n\n<?php\n// Определяем базовый URL для категорий\n$CATALOG_BASE_URL = \"https://btx.edsy.ru\";\n?>\n\n<div class=\"edsys-megamenu\" id=\"megaMenu\">\n    <div class=\"edsys-megamenu__container\">\n        <div class=\"edsys-megamenu__grid\">\n            <div class=\"edsys-megamenu__column\">\n                <ul>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/turovye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/turovye-distribyutory.jpeg\"\n                                 alt=\"Туровые дистрибьюторы\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Туровые дистрибьюторы\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/rjekovye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/rekovye-distribyutory.jpeg\"\n                                 alt=\"Рэковые дистрибьюторы\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Рэковые дистрибьюторы\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/vvod-ot-63a/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/vvod-ot-63a.jpeg\" alt=\"Ввод от 63A\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Ввод от 63A\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/ustrojstva-s-zashhitnymi-rele/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/ustroistva-s-zaschitnymi-rele.jpeg\"\n                                 alt=\"Устройства с защитными реле\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Устройства с защитными реле\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/seriya-black-edition/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/seriya-black-edition.jpeg\"\n                                 alt=\"Серия Black Edition\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Серия Black Edition\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/distribyutori-so-vstroennym-splitterom/\"\n                           class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/distribyutory-so-vstroennym-splitterom.jpeg\"\n                                 alt=\"Дистрибьюторы со встроенным сплиттером\" class=\"edsys-megamenu__image\" width=\"48\"\n                                 height=\"48\" loading=\"lazy\">\n                            Дистрибьюторы со встроенным сплиттером\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div class=\"edsys-megamenu__column\">\n                <ul>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-lebedochnye-digital/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-lebedochnye-cifrovye.jpeg\"\n                                 alt=\"Пульты лебедочные цифровые\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Пульты лебедочные цифровые\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-lebedochnye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-lebedochnye-analogovye.jpeg\"\n                                 alt=\"Пульты лебедочные аналоговые\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Пульты лебедочные аналоговые\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/art-net-dmx-konvertery/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/art-net-dmx-konvertery.jpeg\"\n                                 alt=\"Art-Net - DMX конвертеры\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Art-Net - DMX конвертеры\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/dmx-splitters/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/dmx-splittery.jpeg\" alt=\"DMX-сплиттеры\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            DMX-сплиттеры\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/dimmery/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/dimmery.jpeg\" alt=\"Диммеры\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Диммеры\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/sekvensory/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/sekvensory.jpeg\" alt=\"Секвенсоры\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Секвенсоры\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/svitchery/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/svitchery.jpeg\" alt=\"Свитчеры\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Свитчеры\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div class=\"edsys-megamenu__column\">\n                <ul>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/korobki-kommutatsionnye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/kommutacionnye-korobki.jpeg\"\n                                 alt=\"Коммутационные коробки\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Коммутационные коробки\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-knopochnye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-upravleniya.jpeg\"\n                                 alt=\"Пульты управления\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Пульты управления\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/easylink/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/ustroistva-peredachi-signala.jpeg\"\n                                 alt=\"Устройства передачи сигнала\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Устройства передачи сигнала\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/audio-devices/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/audio-izolyatory.jpeg\"\n                                 alt=\"Аудио изоляторы\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Аудиоустройства\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/paneli-rekovye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/rekovye-paneli.jpeg\"\n                                 alt=\"Рэковые панели\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Рэковые панели\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/rekovye-aksessuary/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/reki-i-aksessuary.jpeg\"\n                                 alt=\"Рэки и аксессуары\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Рэки и аксессуары\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/sistemy-podvesa/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/strubciny-i-trosik.jpeg\"\n                                 alt=\"Струбцины и тросики\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Струбцины и тросики\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div class=\"edsys-megamenu__column\">\n                <ul>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/lyuchki-sczenicheskie/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/scenicheskie-lyuchki.jpeg\"\n                                 alt=\"Сценические лючки\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Сценические лючки\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/nastolnye-lyuchki/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/nastolnye-lyuchki.jpeg\"\n                                 alt=\"Настольные лючки\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Настольные лючки\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/lyuchki-nastennye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/nast.-lyuchok-50piks.jpg\"\n                                 alt=\"Настенные лючки\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Настенные лючки\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/kabelnaya-produktsiya/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/kabelnaya-produkciya.jpeg\"\n                                 alt=\"Кабельная продукция\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Кабельная продукция\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/signalnaya-kommutatsiya/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/signalnaya-kommutaciya.jpeg\"\n                                 alt=\"Сигнальная коммутация\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Сигнальная коммутация\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/razemy-i-komponenty/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/razemy.jpeg\" alt=\"Разъемы\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Разъемы\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/soputstvuyushchie-tovary/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/soputstvuyuschie-tovary.jpeg\"\n                                 alt=\"Сопутствующие товары\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Сопутствующие товары\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\n<!-- Mobile Navigation -->\n<nav class=\"edsys-mobile-nav\">\n    <div class=\"edsys-mobile-nav__grid\">\n        <button class=\"edsys-mobile-nav__item\" data-action=\"toggle-catalog\">\n            <i class=\"ph ph-thin ph-list\"></i>\n            <span>Каталог</span>\n        </button>\n        <a href=\"#\" class=\"edsys-mobile-nav__item\">\n            <i class=\"ph ph-thin ph-package\"></i>\n            <span>Заказы</span>\n        </a>\n        <a href=\"#\" class=\"edsys-mobile-nav__item\">\n            <i class=\"ph ph-thin ph-heart\"></i>\n            <span>Избранное</span>\n        </a>\n        <a href=\"#\" class=\"edsys-mobile-nav__item\">\n            <i class=\"ph ph-thin ph-chart-bar\"></i>\n            <span>Сравнение</span>\n        </a>\n    </div>\n</nav>\n\n<!-- Mobile Menu -->\n<?php\n$APPLICATION->IncludeComponent(\n\t\"bitrix:menu\",\n\t\"mobile_dropdown\",\n\tarray(\n\t\t\"ROOT_MENU_TYPE\" => \"main\",\n\t\t\"CHILD_MENU_TYPE\" => \"left\",\n\t\t\"MAX_LEVEL\" => \"2\",\n\t\t\"USE_EXT\" => \"Y\",\n\t\t\"MENU_CACHE_TYPE\" => \"N\",\n\t\t\"MENU_CACHE_TIME\" => \"3600\",\n\t\t\"MENU_CACHE_USE_GROUPS\" => \"Y\",\n\t\t\"MENU_CACHE_GET_VARS\" => array(),\n\t\t\"COMPONENT_TEMPLATE\" => \"mobile_dropdown\"\n\t),\n\tfalse\n);\n?>\n\n<!-- Mobile Catalog -->\n<?php\n// Определяем базовый URL для категорий\n$CATALOG_BASE_URL = \"https://btx.edsy.ru\";\n?>\n\n<div class=\"edsys-mobile-catalog\" id=\"mobileCatalog\">\n    <div class=\"edsys-mobile-catalog__header\">\n        <!--        <h3>Все товары каталога</h3>-->\n        <button class=\"edsys-good__all\">все товары в таблице</button>\n        <button class=\"edsys-mobile-catalog__close\" data-action=\"toggle-catalog\">\n            <i class=\"ph ph-thin ph-x\"></i>\n        </button>\n    </div>\n    <ul class=\"edsys-mobile-catalog__list\">\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/turovye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/turovye-distribyutory.jpeg\"\n                     alt=\"Туровые дистрибьюторы\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Туровые дистрибьюторы\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/rjekovye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/rekovye-distribyutory.jpeg\"\n                     alt=\"Рэковые дистрибьюторы\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Рэковые дистрибьюторы\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/vvod-ot-63a/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/vvod-ot-63a.jpeg\" alt=\"Ввод от 63A\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Ввод от 63A\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/ustrojstva-s-zashhitnymi-rele/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/ustroistva-s-zaschitnymi-rele.jpeg\"\n                     alt=\"Устройства с защитными реле\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Устройства с защитными реле\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/seriya-black-edition/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/seriya-black-edition.jpeg\"\n                     alt=\"Серия Black Edition\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Серия Black Edition\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/distribyutori-so-vstroennym-splitterom/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/distribyutory-so-vstroennym-splitterom.jpeg\"\n                     alt=\"Дистрибьюторы со встроенным сплиттером\" class=\"edsys-mobile-catalog__icon\" width=\"24\"\n                     height=\"24\" loading=\"lazy\">\n                Дистрибьюторы со встроенным сплиттером\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-lebedochnye-digital/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-lebedochnye-cifrovye.jpeg\"\n                     alt=\"Пульты лебедочные цифровые\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Пульты лебедочные цифровые\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-lebedochnye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-lebedochnye-analogovye.jpeg\"\n                     alt=\"Пульты лебедочные аналоговые\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Пульты лебедочные аналоговые\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/art-net-dmx-konvertery/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/art-net-dmx-konvertery.jpeg\"\n                     alt=\"Art-Net - DMX конвертеры\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Art-Net - DMX конвертеры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/dmx-splitters/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/dmx-splittery.jpeg\" alt=\"DMX-сплиттеры\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                DMX-сплиттеры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/dimmery/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/dimmery.jpeg\" alt=\"Диммеры\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Диммеры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/sekvensory/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/sekvensory.jpeg\" alt=\"Секвенсоры\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Секвенсоры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/svitchery/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/svitchery.jpeg\" alt=\"Свитчеры\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Свитчеры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/korobki-kommutatsionnye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/kommutacionnye-korobki.jpeg\"\n                     alt=\"Коммутационные коробки\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Коммутационные коробки\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-knopochnye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-upravleniya.jpeg\" alt=\"Пульты управления\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Пульты управления\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/easylink/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/ustroistva-peredachi-signala.jpeg\"\n                     alt=\"Устройства передачи сигнала\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Устройства передачи сигнала\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/audio-devices/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/audio-izolyatory.jpeg\" alt=\"Аудио изоляторы\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Аудиоустройства\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/paneli-rekovye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/rekovye-paneli.jpeg\" alt=\"Рэковые панели\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Рэковые панели\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/rekovye-aksessuary/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/reki-i-aksessuary.jpeg\" alt=\"Рэки и аксессуары\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Рэки и аксессуары\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/sistemy-podvesa/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/strubciny-i-trosik.jpeg\" alt=\"Струбцины и тросики\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Струбцины и тросики\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/lyuchki-sczenicheskie/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/scenicheskie-lyuchki.jpeg\" alt=\"Сценические лючки\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Сценические лючки\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/nastolnye-lyuchki/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/nastolnye-lyuchki.jpeg\" alt=\"Настольные лючки\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Настольные лючки\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/lyuchki-nastennye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/nast.-lyuchok-50piks.jpg\" alt=\"Настенные лючки\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Настенные лючки\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/kabelnaya-produktsiya/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/kabelnaya-produkciya.jpeg\"\n                     alt=\"Кабельная продукция\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Кабельная продукция\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/signalnaya-kommutatsiya/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/signalnaya-kommutaciya.jpeg\"\n                     alt=\"Сигнальная коммутация\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Сигнальная коммутация\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/razemy-i-komponenty/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/razemy.jpeg\" alt=\"Разъемы\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Разъемы\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/soputstvuyushchie-tovary/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/soputstvuyuschie-tovary.jpeg\"\n                     alt=\"Сопутствующие товары\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Сопутствующие товары\n            </a>\n        </li>\n    </ul>\n</div>",
            "instruction": "Disable the admin panel for all non-admin users by adding a PHP script before the closing </head> tag. This script checks if the current user is an administrator and, if not, sets the 'ShowPanel' property of the application to false, effectively hiding the admin panel from view.",
            "new_string": "<?if(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();?>\n\n<?php\n\nif (!defined('DEFAULT_TEMPLATE_PATH')) {\n\tdefine('DEFAULT_TEMPLATE_PATH', '/local/templates/' . SITE_TEMPLATE_ID);\n}\n\n// Альтернативный вариант если SITE_TEMPLATE_ID не работает\nif (!defined('DEFAULT_TEMPLATE_PATH') || DEFAULT_TEMPLATE_PATH === '/local/templates/') {\n\tdefine('DEFAULT_TEMPLATE_PATH', '/local/templates/edsy_main');\n}\n?>\n<!DOCTYPE html>\n<html lang=\"ru\">\n<head>\n\t<?php\n\tuse Bitrix\\Main\\Page\\Asset;\n\t$APPLICATION->ShowHead();\n\t$APPLICATION->ShowHead();\n\t?>\n    <title><?php $APPLICATION->ShowTitle(); ?></title>\n\n\t<?php\n\tAsset::getInstance()->addString('<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">');\n\t// Подключение jQuery из ядра Битрикса\n\tAsset::getInstance()->addJs(\"/bitrix/js/main/jquery/jquery-3.7.1.min.js\");\n\n\t// Preconnect для оптимизации загрузки шрифтов\n\tAsset::getInstance()->addString('<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">');\n\tAsset::getInstance()->addString('<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>');\n\n\t// Async загрузка шрифтов\n\tAsset::getInstance()->addString('<link href=\"https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap\" rel=\"stylesheet\">');\n\n\t// Preload основных стилей и скриптов\n//\tAsset::getInstance()->addString('<link rel=\"preload\" href=\"' . DEFAULT_TEMPLATE_PATH . '/css/main.css\" as=\"style\">');\n\tAsset::getInstance()->addString('<link rel=\"preload\" href=\"' . DEFAULT_TEMPLATE_PATH . '/js/main.js\" as=\"script\" crossorigin>');\n\n\t// Подключение основных стилей\n\tAsset::getInstance()->addCss(DEFAULT_TEMPLATE_PATH . \"/css/main.css\");\n\n\t// Подключение основных скриптов\n\tAsset::getInstance()->addString('<script type=\"module\" src=\"' . DEFAULT_TEMPLATE_PATH . '/js/main.js\"></script>');\n\n\n\t// Phosphor Icons\n\tAsset::getInstance()->addString('<link rel=\"stylesheet\" href=\"https://unpkg.com/@phosphor-icons/web@2.1.1/src/regular/style.css\">');\n\tAsset::getInstance()->addString('<link rel=\"stylesheet\" href=\"https://unpkg.com/@phosphor-icons/web@2.1.1/src/thin/style.css\">');\n\n\t// Inline critical CSS (для предотвращения FOUC и ускорения загрузки)\n\tAsset::getInstance()->addString('\n        <style>\n            :root {\n                --edsys-font-primary: \\'Open Sans\\', -apple-system, BlinkMacSystemFont, \\'Segoe UI\\', sans-serif;\n                --edsys-font-regular: 400;\n                --edsys-font-bold: 700;\n                --edsys-primary: #ff4757;\n                --edsys-white: #ffffff;\n                --edsys-text: #21242D;\n                --edsys-bg: #f5f5f7;\n                --edsys-border: #e0e0e0;\n                --container-max: min(103.2rem, 100vw - 2rem);\n                --container-padding: clamp(1rem, 3vw, 2rem);\n            }\n\n            * {\n                margin: 0;\n                padding: 0;\n                box-sizing: border-box;\n            }\n\n            body {\n                font-family: var(--edsys-font-primary);\n                font-weight: var(--edsys-font-regular);\n                line-height: 1.5;\n                color: var(--edsys-text);\n                background: var(--edsys-bg);\n                -webkit-font-smoothing: antialiased;\n                -moz-osx-font-smoothing: grayscale;\n            }\n\n            .edsys-header {\n                position: relative;\n                z-index: 1000;\n                background: var(--edsys-white);\n                border-bottom: 1px solid var(--edsys-border);\n            }\n\n            .edsys-header__container {\n                max-width: var(--container-max);\n                margin: 0 auto;\n            }\n\n            .edsys-megamenu,\n            .edsys-mobile-menu,\n            .edsys-mobile-catalog,\n            .edsys-overlay {\n                visibility: visible;\n            }\n        </style>\n    ');\n\t?>\n\t<?php $APPLICATION->IncludeFile('/local/templates/.default/include/catalog_styles.php'); ?>\n    <script>\n        window.SITE_CONFIG = {\n            ASSETS: {\n                logo: '/img/logo.svg',\n                heroVideo: '/img/hero-vid.jpg',\n                favicon: '/img/favicon.ico'\n            }\n        };\n    </script>\n<?php\n// Скрыть панель для всех, кроме администраторов\nglobal $USER;\nif (!$USER->IsAdmin()) {\n    $APPLICATION->ShowPanel = false;\n}\n?>\n</head>\n\n<body>\n<div id=\"panel\"><?php $APPLICATION->ShowPanel(); ?></div>\n<!-- Header -->\n<header class=\"edsys-header\">\n    <div class=\"edsys-header__container\">\n        <!-- Mobile Top Bar -->\n        <div class=\"edsys-header__mobile-top\">\n            <a href=\"https://wa.me/79999999999\" class=\"edsys-header__mobile-contact\" aria-label=\"WhatsApp\">\n                <i class=\"ph ph-thin ph-whatsapp-logo\"></i>\n            </a>\n\n            <div class=\"edsys-header__logo\">\n\t\t        <?php if($APPLICATION->GetCurPage() !== '/'): ?>\n                <a href=\"/\" class=\"edsys-header__logo-link\">\n\t\t\t        <?php endif; ?>\n                    <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/logo.svg\" alt=\"EDS\">\n                    <div class=\"edsys-header__title\">\n                        <span>ELECTRIC</span>\n                        <span>DISTRIBUTION</span>\n                        <span>SYSTEMS</span>\n                    </div>\n\t\t\t        <?php if($APPLICATION->GetCurPage() !== '/'): ?>\n                </a>\n\t        <?php endif; ?>\n            </div>\n\n            <a href=\"tel:+79105273538\" class=\"edsys-header__mobile-contact\" aria-label=\"Позвонить\">\n                <i class=\"ph ph-thin ph-phone\"></i>\n            </a>\n        </div>\n\n        <!-- Mobile Search Bar -->\n        <div class=\"edsys-header__mobile-search\">\n            <button class=\"edsys-header__mobile-search-btn\" data-action=\"toggle-catalog\" aria-label=\"Каталог\">\n                <i class=\"ph ph-list-magnifying-glass\"></i>\n            </button>\n\n            <div class=\"edsys-header__search\">\n                <form class=\"edsys-header__search-form\" action=\"#\" method=\"get\">\n                    <input type=\"search\" class=\"edsys-header__search-input\" placeholder=\"Поиск товара...\" name=\"q\"\n                           aria-label=\"Поиск товара\">\n                    <button type=\"submit\" class=\"edsys-header__search-btn\" aria-label=\"Найти\">\n                        <i class=\"ph ph-thin ph-magnifying-glass\"></i>\n                    </button>\n                </form>\n            </div>\n\n            <button class=\"edsys-header__mobile-hamburger\" data-action=\"toggle-menu\" aria-label=\"Меню\">\n                <i class=\"ph ph-thin ph-list\"></i>\n            </button>\n        </div>\n\n        <!-- Desktop Header -->\n        <div class=\"edsys-header__top\">\n            <!-- Logo -->\n            <div class=\"edsys-header__logo\">\n\t\t        <?php if($APPLICATION->GetCurPage() !== '/'): ?>\n                <a href=\"/\" class=\"edsys-header__logo-link\">\n\t\t\t        <?php endif; ?>\n                    <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/logo.svg\" alt=\"EDS\">\n                    <div class=\"edsys-header__title\">\n                        <span>ELECTRIC</span>\n                        <span>DISTRIBUTION</span>\n                        <span>SYSTEMS</span>\n                    </div>\n\t\t\t        <?php if($APPLICATION->GetCurPage() !== '/'): ?>\n                </a>\n\t        <?php endif; ?>\n            </div>\n\n            <!-- Catalog Button -->\n            <div class=\"edsys-header__catalog\">\n                <button class=\"edsys-header__catalog-btn\" id=\"catalogBtn\">\n                    <i class=\"ph ph-list-magnifying-glass\"></i>\n                    <span class=\"edsys-header__catalog-text\">КАТАЛОГ</span>\n                </button>\n            </div>\n\n            <!-- Search -->\n            <div class=\"edsys-header__search\">\n                <form class=\"edsys-header__search-form\" action=\"#\" method=\"get\">\n                    <input type=\"search\" class=\"edsys-header__search-input\" placeholder=\"Поиск товара...\" name=\"q\"\n                           aria-label=\"Поиск товара\">\n                    <button type=\"submit\" class=\"edsys-header__search-btn\" aria-label=\"Найти\">\n                        <i class=\"ph ph-thin ph-magnifying-glass\"></i>\n                    </button>\n                </form>\n            </div>\n\n            <!-- Actions -->\n            <div class=\"edsys-header__actions\">\n                <a href=\"#\" class=\"edsys-header__action\">\n                    <i class=\"ph ph-thin ph-package\"></i>\n                    <span class=\"edsys-header__action-text\">Заказы</span>\n                </a>\n                <a href=\"#\" class=\"edsys-header__action\">\n                    <i class=\"ph ph-thin ph-heart\"></i>\n                    <span class=\"edsys-header__action-text\">Избранное</span>\n                </a>\n                <a href=\"#\" class=\"edsys-header__action\">\n                    <i class=\"ph ph-thin ph-chart-bar\"></i>\n                    <span class=\"edsys-header__action-text\">Сравнение</span>\n                </a>\n                <?if ($USER->IsAuthorized()):?>\n                    <a href=\"/personal/profile/\" class=\"edsys-header__action\">\n                        <i class=\"ph ph-thin ph-user\"></i>\n                        <span class=\"edsys-header__action-text\">Аккаунт</span>\n                    </a>\n                <?else:?>\n                    <a href=\"/auth/\" class=\"edsys-header__action\">\n                        <i class=\"ph ph-thin ph-user\"></i>\n                        <span class=\"edsys-header__action-text\">Войти</span>\n                    </a>\n                <?endif;?>\n                <a href=\"#\" class=\"edsys-header__action\">\n                    <i class=\"ph ph-thin ph-shopping-cart\"></i>\n                    <span class=\"edsys-header__action-text\">Корзина</span>\n                </a>\n            </div>\n        </div>\n\n        <!-- Навигационное меню -->\n\t    <?$APPLICATION->IncludeComponent(\n\t\t    \"bitrix:menu\",\n\t\t    \"header_dropdown\",\n\t\t    array(\n\t\t\t    \"ROOT_MENU_TYPE\" => \"main\",\n\t\t\t    \"CHILD_MENU_TYPE\" => \"left\",\n\t\t\t    \"MAX_LEVEL\" => \"2\",\n\t\t\t    \"USE_EXT\" => \"Y\",\n\t\t\t    \"MENU_CACHE_TYPE\" => \"N\" // Отключаем кэш для тестирования\n\t\t    )\n\t    );?>\n\n    </div>\n</header>\n\n<?php\n// Определяем базовый URL для категорий\n$CATALOG_BASE_URL = \"https://btx.edsy.ru\";\n?>\n\n<div class=\"edsys-megamenu\" id=\"megaMenu\">\n    <div class=\"edsys-megamenu__container\">\n        <div class=\"edsys-megamenu__grid\">\n            <div class=\"edsys-megamenu__column\">\n                <ul>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/turovye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/turovye-distribyutory.jpeg\"\n                                 alt=\"Туровые дистрибьюторы\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Туровые дистрибьюторы\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/rjekovye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/rekovye-distribyutory.jpeg\"\n                                 alt=\"Рэковые дистрибьюторы\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Рэковые дистрибьюторы\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/vvod-ot-63a/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/vvod-ot-63a.jpeg\" alt=\"Ввод от 63A\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Ввод от 63A\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/ustrojstva-s-zashhitnymi-rele/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/ustroistva-s-zaschitnymi-rele.jpeg\"\n                                 alt=\"Устройства с защитными реле\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Устройства с защитными реле\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/seriya-black-edition/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/seriya-black-edition.jpeg\"\n                                 alt=\"Серия Black Edition\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Серия Black Edition\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/distribyutori-so-vstroennym-splitterom/\"\n                           class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/distribyutory-so-vstroennym-splitterom.jpeg\"\n                                 alt=\"Дистрибьюторы со встроенным сплиттером\" class=\"edsys-megamenu__image\" width=\"48\"\n                                 height=\"48\" loading=\"lazy\">\n                            Дистрибьюторы со встроенным сплиттером\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div class=\"edsys-megamenu__column\">\n                <ul>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-lebedochnye-digital/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-lebedochnye-cifrovye.jpeg\"\n                                 alt=\"Пульты лебедочные цифровые\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Пульты лебедочные цифровые\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-lebedochnye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-lebedochnye-analogovye.jpeg\"\n                                 alt=\"Пульты лебедочные аналоговые\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Пульты лебедочные аналоговые\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/art-net-dmx-konvertery/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/art-net-dmx-konvertery.jpeg\"\n                                 alt=\"Art-Net - DMX конвертеры\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Art-Net - DMX конвертеры\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/dmx-splitters/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/dmx-splittery.jpeg\" alt=\"DMX-сплиттеры\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            DMX-сплиттеры\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/dimmery/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/dimmery.jpeg\" alt=\"Диммеры\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Диммеры\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/sekvensory/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/sekvensory.jpeg\" alt=\"Секвенсоры\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Секвенсоры\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/svitchery/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/svitchery.jpeg\" alt=\"Свитчеры\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Свитчеры\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div class=\"edsys-megamenu__column\">\n                <ul>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/korobki-kommutatsionnye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/kommutacionnye-korobki.jpeg\"\n                                 alt=\"Коммутационные коробки\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Коммутационные коробки\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-knopochnye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-upravleniya.jpeg\"\n                                 alt=\"Пульты управления\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Пульты управления\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/easylink/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/ustroistva-peredachi-signala.jpeg\"\n                                 alt=\"Устройства передачи сигнала\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Устройства передачи сигнала\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/audio-devices/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/audio-izolyatory.jpeg\"\n                                 alt=\"Аудио изоляторы\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Аудиоустройства\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/paneli-rekovye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/rekovye-paneli.jpeg\"\n                                 alt=\"Рэковые панели\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Рэковые панели\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/rekovye-aksessuary/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/reki-i-aksessuary.jpeg\"\n                                 alt=\"Рэки и аксессуары\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Рэки и аксессуары\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/sistemy-podvesa/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/strubciny-i-trosik.jpeg\"\n                                 alt=\"Струбцины и тросики\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Струбцины и тросики\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div class=\"edsys-megamenu__column\">\n                <ul>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/lyuchki-sczenicheskie/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/scenicheskie-lyuchki.jpeg\"\n                                 alt=\"Сценические лючки\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Сценические лючки\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/nastolnye-lyuchki/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/nastolnye-lyuchki.jpeg\"\n                                 alt=\"Настольные лючки\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Настольные лючки\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/lyuchki-nastennye/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/nast.-lyuchok-50piks.jpg\"\n                                 alt=\"Настенные лючки\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Настенные лючки\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/kabelnaya-produktsiya/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/kabelnaya-produkciya.jpeg\"\n                                 alt=\"Кабельная продукция\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Кабельная продукция\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/signalnaya-kommutatsiya/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/signalnaya-kommutaciya.jpeg\"\n                                 alt=\"Сигнальная коммутация\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Сигнальная коммутация\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/razemy-i-komponenty/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/razemy.jpeg\" alt=\"Разъемы\"\n                                 class=\"edsys-megamenu__image\" width=\"48\" height=\"48\" loading=\"lazy\">\n                            Разъемы\n                        </a>\n                    </li>\n                    <li class=\"edsys-megamenu__item\">\n                        <a href=\"<?=$CATALOG_BASE_URL?>/cat/soputstvuyushchie-tovary/\" class=\"edsys-megamenu__link\">\n                            <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/soputstvuyuschie-tovary.jpeg\"\n                                 alt=\"Сопутствующие товары\" class=\"edsys-megamenu__image\" width=\"48\" height=\"48\"\n                                 loading=\"lazy\">\n                            Сопутствующие товары\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\n<!-- Mobile Navigation -->\n<nav class=\"edsys-mobile-nav\">\n    <div class=\"edsys-mobile-nav__grid\">\n        <button class=\"edsys-mobile-nav__item\" data-action=\"toggle-catalog\">\n            <i class=\"ph ph-thin ph-list\"></i>\n            <span>Каталог</span>\n        </button>\n        <a href=\"#\" class=\"edsys-mobile-nav__item\">\n            <i class=\"ph ph-thin ph-package\"></i>\n            <span>Заказы</span>\n        </a>\n        <a href=\"#\" class=\"edsys-mobile-nav__item\">\n            <i class=\"ph ph-thin ph-heart\"></i>\n            <span>Избранное</span>\n        </a>\n        <a href=\"#\" class=\"edsys-mobile-nav__item\">\n            <i class=\"ph ph-thin ph-chart-bar\"></i>\n            <span>Сравнение</span>\n        </a>\n    </div>\n</nav>\n\n<!-- Mobile Menu -->\n<?php\n$APPLICATION->IncludeComponent(\n\t\"bitrix:menu\",\n\t\"mobile_dropdown\",\n\tarray(\n\t\t\"ROOT_MENU_TYPE\" => \"main\",\n\t\t\"CHILD_MENU_TYPE\" => \"left\",\n\t\t\"MAX_LEVEL\" => \"2\",\n\t\t\"USE_EXT\" => \"Y\",\n\t\t\"MENU_CACHE_TYPE\" => \"N\",\n\t\t\"MENU_CACHE_TIME\" => \"3600\",\n\t\t\"MENU_CACHE_USE_GROUPS\" => \"Y\",\n\t\t\"MENU_CACHE_GET_VARS\" => array(),\n\t\t\"COMPONENT_TEMPLATE\" => \"mobile_dropdown\"\n\t),\n\tfalse\n);\n?>\n\n<!-- Mobile Catalog -->\n<?php\n// Определяем базовый URL для категорий\n$CATALOG_BASE_URL = \"https://btx.edsy.ru\";\n?>\n\n<div class=\"edsys-mobile-catalog\" id=\"mobileCatalog\">\n    <div class=\"edsys-mobile-catalog__header\">\n        <!--        <h3>Все товары каталога</h3>-->\n        <button class=\"edsys-good__all\">все товары в таблице</button>\n        <button class=\"edsys-mobile-catalog__close\" data-action=\"toggle-catalog\">\n            <i class=\"ph ph-thin ph-x\"></i>\n        </button>\n    </div>\n    <ul class=\"edsys-mobile-catalog__list\">\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/turovye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/turovye-distribyutory.jpeg\"\n                     alt=\"Туровые дистрибьюторы\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Туровые дистрибьюторы\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/rjekovye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/rekovye-distribyutory.jpeg\"\n                     alt=\"Рэковые дистрибьюторы\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Рэковые дистрибьюторы\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/vvod-ot-63a/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/vvod-ot-63a.jpeg\" alt=\"Ввод от 63A\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Ввод от 63A\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/ustrojstva-s-zashhitnymi-rele/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/ustroistva-s-zaschitnymi-rele.jpeg\"\n                     alt=\"Устройства с защитными реле\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Устройства с защитными реле\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/seriya-black-edition/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/seriya-black-edition.jpeg\"\n                     alt=\"Серия Black Edition\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Серия Black Edition\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/distribyutori-so-vstroennym-splitterom/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/distribyutory-so-vstroennym-splitterom.jpeg\"\n                     alt=\"Дистрибьюторы со встроенным сплиттером\" class=\"edsys-mobile-catalog__icon\" width=\"24\"\n                     height=\"24\" loading=\"lazy\">\n                Дистрибьюторы со встроенным сплиттером\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-lebedochnye-digital/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-lebedochnye-cifrovye.jpeg\"\n                     alt=\"Пульты лебедочные цифровые\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Пульты лебедочные цифровые\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-lebedochnye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-lebedochnye-analogovye.jpeg\"\n                     alt=\"Пульты лебедочные аналоговые\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Пульты лебедочные аналоговые\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/art-net-dmx-konvertery/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/art-net-dmx-konvertery.jpeg\"\n                     alt=\"Art-Net - DMX конвертеры\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Art-Net - DMX конвертеры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/dmx-splitters/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/dmx-splittery.jpeg\" alt=\"DMX-сплиттеры\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                DMX-сплиттеры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/dimmery/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/dimmery.jpeg\" alt=\"Диммеры\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Диммеры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/sekvensory/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/sekvensory.jpeg\" alt=\"Секвенсоры\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Секвенсоры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/svitchery/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/svitchery.jpeg\" alt=\"Свитчеры\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Свитчеры\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/korobki-kommutatsionnye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/kommutacionnye-korobki.jpeg\"\n                     alt=\"Коммутационные коробки\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Коммутационные коробки\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/pulty-knopochnye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/pulty-upravleniya.jpeg\" alt=\"Пульты управления\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Пульты управления\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/easylink/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/ustroistva-peredachi-signala.jpeg\"\n                     alt=\"Устройства передачи сигнала\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Устройства передачи сигнала\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/audio-devices/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/audio-izolyatory.jpeg\" alt=\"Аудио изоляторы\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Аудиоустройства\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/paneli-rekovye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/rekovye-paneli.jpeg\" alt=\"Рэковые панели\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Рэковые панели\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/rekovye-aksessuary/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/reki-i-aksessuary.jpeg\" alt=\"Рэки и аксессуары\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Рэки и аксессуары\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/sistemy-podvesa/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/strubciny-i-trosik.jpeg\" alt=\"Струбцины и тросики\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Струбцины и тросики\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/lyuchki-sczenicheskie/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/scenicheskie-lyuchki.jpeg\" alt=\"Сценические лючки\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Сценические лючки\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/nastolnye-lyuchki/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/nastolnye-lyuchki.jpeg\" alt=\"Настольные лючки\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Настольные лючки\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/lyuchki-nastennye/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/nast.-lyuchok-50piks.jpg\" alt=\"Настенные лючки\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Настенные лючки\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/kabelnaya-produktsiya/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/kabelnaya-produkciya.jpeg\"\n                     alt=\"Кабельная продукция\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Кабельная продукция\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/signalnaya-kommutatsiya/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/signalnaya-kommutaciya.jpeg\"\n                     alt=\"Сигнальная коммутация\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Сигнальная коммутация\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/razemy-i-komponenty/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/razemy.jpeg\" alt=\"Разъемы\"\n                     class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\" loading=\"lazy\">\n                Разъемы\n            </a>\n        </li>\n        <li class=\"edsys-mobile-catalog__item\">\n            <a href=\"<?=$CATALOG_BASE_URL?>/cat/soputstvuyushchie-tovary/\" class=\"edsys-mobile-catalog__link\">\n                <img src=\"<?=DEFAULT_TEMPLATE_PATH?>/images/soputstvuyuschie-tovary.jpeg\"\n                     alt=\"Сопутствующие товары\" class=\"edsys-mobile-catalog__icon\" width=\"24\" height=\"24\"\n                     loading=\"lazy\">\n                Сопутствующие товары\n            </a>\n        </li>\n    </ul>\n</div>"
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760697273391-c5ccc0b626d32",
                "name": "replace",
                "response": {
                  "output": "Successfully modified file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/header.php (1 replacements)."
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:34:44.659Z",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ],
      "thoughts": [
        {
          "subject": "Inserting the Code",
          "description": "I've successfully identified the target file and the correct insertion point: just before the `</head>` tag. I'm preparing to insert the PHP code snippet I have, which will address the specific requirement.",
          "timestamp": "2025-10-17T10:34:30.012Z"
        },
        {
          "subject": "Applying the Replacement",
          "description": "I've now loaded the full file content, and I'm ready to perform the replacement operation. Using the `replace` tool, I will insert the PHP snippet precisely before the closing `</head>` tag. This should implement the desired functionality.",
          "timestamp": "2025-10-17T10:34:33.367Z"
        }
      ],
      "model": "gemini-2.5-pro",
      "tokens": {
        "input": 22637,
        "output": 286,
        "cached": 0,
        "thoughts": 88,
        "tool": 0,
        "total": 23011
      }
    },
    {
      "id": "f733b8cc-8fa8-4ad4-a249-d476de9a044f",
      "timestamp": "2025-10-17T10:34:47.877Z",
      "type": "gemini",
      "content": "Готово. Я добавил код в файл `/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/header.php`, который отключает админ-панель для всех пользователей, кроме администраторов.",
      "thoughts": [
        {
          "subject": "Concluding the Implementation",
          "description": "\\n\\n\n\nI've just finished the code integration within `header.php`. My next step is to let the user know that this particular task is now fully resolved and ready to go.",
          "timestamp": "2025-10-17T10:34:47.814Z"
        }
      ],
      "tokens": {
        "input": 44059,
        "output": 60,
        "cached": 12908,
        "thoughts": 30,
        "tool": 0,
        "total": 44149
      },
      "model": "gemini-2.5-pro"
    },
    {
      "id": "25385f64-fbde-4e81-b0a9-3db4e3eb7f79",
      "timestamp": "2025-10-17T10:47:52.668Z",
      "type": "user",
      "content": "измени, пожалуйста, поля формы на странице https://btx.edsy.ru/personal/profile/. Вот скриншот страницы @image.png Удали эти разделы: Профиль форума\nПрофиль блога\nПрофиль студента, иконки и ссылки на соцсети     \nВаши связанные профили:\nСоциальная сетьИмя\nВ разделах \"Личные данные\" и \"Информация о работе\" удали поля:ICQ, пейджер, факс. Измени дизайн страницы в соответствии с дизайном сайта согласно скриншоту @@main_page.png\n--- Content from referenced files ---<image/png>\n--- End of content ---"
    },
    {
      "id": "25172170-0d86-47d5-a0bd-a96ef3bb9f3b",
      "timestamp": "2025-10-17T10:48:04.461Z",
      "type": "gemini",
      "content": "",
      "toolCalls": [
        {
          "id": "glob-1760698081937-e902aeae22618",
          "name": "glob",
          "args": {
            "pattern": "**/personal/profile/index.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "glob-1760698081937-e902aeae22618",
                "name": "glob",
                "response": {
                  "output": "Found 1 file(s) matching \"**/personal/profile/index.php\" within /home/c/contes1u/btx.edsy.ru/public_html, sorted by modification time (newest first):\n/home/c/contes1u/btx.edsy.ru/public_html/personal/profile/index.php"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:48:04.460Z",
          "resultDisplay": "Found 1 matching file(s)",
          "displayName": "FindFiles",
          "description": "Efficiently finds files matching specific glob patterns (e.g., `src/**/*.ts`, `**/*.md`), returning absolute paths sorted by modification time (newest first). Ideal for quickly locating files based on their name or path structure, especially in large codebases.",
          "renderOutputAsMarkdown": true
        }
      ],
      "thoughts": [
        {
          "subject": "Evaluating Profile Modifications",
          "description": "I'm focused on the requested user profile modifications. My initial step is to identify the sections slated for removal, specifically the \"Forum Profile\" and \"Blog Profile\" elements on the target page. Next, I need to understand the potential impact of their removal.",
          "timestamp": "2025-10-17T10:48:01.911Z"
        },
        {
          "subject": "Identifying Code Elements",
          "description": "I've gathered a detailed list of profile modifications, including the removal of several sections and fields, along with a design overhaul. Given the Bitrix framework, I'm now zeroing in on the `/personal/profile/index.php` file, which should point to the profile component. This will allow me to pinpoint the code responsible for generating the page and begin implementing the requested changes.",
          "timestamp": "2025-10-17T10:48:01.924Z"
        }
      ],
      "model": "gemini-2.5-pro",
      "tokens": {
        "input": 47795,
        "output": 10,
        "cached": 0,
        "thoughts": 300,
        "tool": 0,
        "total": 48105
      }
    },
    {
      "id": "17409894-878b-45d0-968f-5888b5ebde62",
      "timestamp": "2025-10-17T10:48:09.827Z",
      "type": "gemini",
      "content": "",
      "toolCalls": [
        {
          "id": "read_file-1760698089783-c9cde2436699e",
          "name": "read_file",
          "args": {
            "absolute_path": "/home/c/contes1u/btx.edsy.ru/public_html/personal/profile/index.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "read_file-1760698089783-c9cde2436699e",
                "name": "read_file",
                "response": {
                  "output": "<?php\n/**\n * Страница профиля пользователя\n * Файл: /personal/profile/index.php\n * \n * @version 1.1.0\n * @author KW https://kowb.ru\n */\n\nrequire($_SERVER[\"DOCUMENT_ROOT\"] . \"/bitrix/header.php\");\n\nglobal $USER, $APPLICATION;\n\nif (!$USER->IsAuthorized()) {\n    LocalRedirect('/auth/?backurl=/personal/profile/');\n    die();\n}\n\n$APPLICATION->SetTitle(\"Личная информация\");\n\n$APPLICATION->SetAdditionalCSS(\"/local/templates/.default/components/bitrix/sale.personal.section/.default/style.css?v=1.1.0\");\n$APPLICATION->AddHeadScript(\"/local/templates/.default/components/bitrix/sale.personal.section/.default/script.js?v=1.1.0\");\n\n$arUser = $USER->GetByID($USER->GetID())->Fetch();\n$userCompany = $arUser['WORK_COMPANY'] ?? '';\n\ninclude($_SERVER[\"DOCUMENT_ROOT\"] . \"/personal/includes/menu.php\");\n?>\n\n<main class=\"edsys-account__content\">\n    <header class=\"edsys-content-header\">\n        <h1 class=\"edsys-dashboard__title\">Личная информация</h1>\n        <p class=\"edsys-dashboard__subtitle\">Управление данными профиля и компании</p>\n    </header>\n\n    <?$APPLICATION->IncludeComponent(\n        \"bitrix:main.profile\",\n        \"\",\n        array(\n            \"SET_TITLE\" => \"N\",\n            \"AJAX_MODE\" => \"N\",\n            \"SEND_INFO\" => \"N\",\n            \"CHECK_RIGHTS\" => \"N\",\n            \"USER_PROPERTY_NAME\" => \"\"\n        ),\n        false\n    );?>\n</main>\n\n        </div>\n    </div>\n</section>\n\n<?php\nrequire($_SERVER[\"DOCUMENT_ROOT\"] . \"/bitrix/footer.php\");\n?>"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:48:09.827Z",
          "resultDisplay": "",
          "displayName": "ReadFile",
          "description": "Reads and returns the content of a specified file. If the file is large, the content will be truncated. The tool's response will clearly indicate if truncation has occurred and will provide details on how to read more of the file using the 'offset' and 'limit' parameters. Handles text, images (PNG, JPG, GIF, WEBP, SVG, BMP), and PDF files. For text files, it can read specific line ranges.",
          "renderOutputAsMarkdown": true
        }
      ],
      "thoughts": [
        {
          "subject": "Identifying the Component",
          "description": "I've located the file and am now digging into its contents. My current focus is pinpointing the specific component responsible for rendering the profile details. I'm carefully examining the code to understand its structure and how it handles the display logic.",
          "timestamp": "2025-10-17T10:48:09.772Z"
        }
      ],
      "model": "gemini-2.5-pro",
      "tokens": {
        "input": 47886,
        "output": 35,
        "cached": 0,
        "thoughts": 30,
        "tool": 0,
        "total": 47951
      }
    },
    {
      "id": "e54d3623-412c-4c7e-b236-de30150fc0c9",
      "timestamp": "2025-10-17T10:48:17.133Z",
      "type": "gemini",
      "content": "",
      "toolCalls": [
        {
          "id": "glob-1760698097116-d05d9e31d8d87",
          "name": "glob",
          "args": {
            "pattern": "/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "glob-1760698097116-d05d9e31d8d87",
                "name": "glob",
                "response": {
                  "output": "No files found matching pattern \"/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php\" within /home/c/contes1u/btx.edsy.ru/public_html"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:48:17.132Z",
          "resultDisplay": "No files found",
          "displayName": "FindFiles",
          "description": "Efficiently finds files matching specific glob patterns (e.g., `src/**/*.ts`, `**/*.md`), returning absolute paths sorted by modification time (newest first). Ideal for quickly locating files based on their name or path structure, especially in large codebases.",
          "renderOutputAsMarkdown": true
        }
      ],
      "thoughts": [
        {
          "subject": "Investigating Profile Component",
          "description": "I'm currently reviewing how the `/personal/profile/index.php` file integrates the `bitrix:main.profile` component, which manages user profile editing. It appears to use the default template, as none is specified. My next step will be to explore how to override this standard template to introduce custom fields and alter the layout.",
          "timestamp": "2025-10-17T10:48:17.097Z"
        },
        {
          "subject": "Checking Template Location",
          "description": "I've determined that the default template is active, as expected. I'm now verifying the existence of the template override file at `/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php`. If it exists, I'll proceed with modifications there. Otherwise, I'll copy the default template to this location before beginning customization.",
          "timestamp": "2025-10-17T10:48:17.108Z"
        }
      ],
      "model": "gemini-2.5-pro",
      "tokens": {
        "input": 48375,
        "output": 26,
        "cached": 47426,
        "thoughts": 209,
        "tool": 0,
        "total": 48610
      }
    },
    {
      "id": "24065354-f75a-404d-9bab-1871c1ef5412",
      "timestamp": "2025-10-17T10:48:32.414Z",
      "type": "gemini",
      "content": "",
      "toolCalls": [
        {
          "id": "glob-1760698109905-fc3e2bfed863a",
          "name": "glob",
          "args": {
            "pattern": "**/bitrix/components/bitrix/main.profile/templates/.default/template.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "glob-1760698109905-fc3e2bfed863a",
                "name": "glob",
                "response": {
                  "output": "Found 1 file(s) matching \"**/bitrix/components/bitrix/main.profile/templates/.default/template.php\" within /home/c/contes1u/btx.edsy.ru/public_html, sorted by modification time (newest first):\n/home/c/contes1u/btx.edsy.ru/public_html/bitrix/components/bitrix/main.profile/templates/.default/template.php"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:48:32.412Z",
          "resultDisplay": "Found 1 matching file(s)",
          "displayName": "FindFiles",
          "description": "Efficiently finds files matching specific glob patterns (e.g., `src/**/*.ts`, `**/*.md`), returning absolute paths sorted by modification time (newest first). Ideal for quickly locating files based on their name or path structure, especially in large codebases.",
          "renderOutputAsMarkdown": true
        }
      ],
      "thoughts": [
        {
          "subject": "Finding the File Path",
          "description": "I've determined that the file I need doesn't exist. Now, I'm focusing on locating the default template to use as a starting point. I've pinpointed the component templates directory, which should allow me to find the required template path. The path to the `main.profile` template is clear now.",
          "timestamp": "2025-10-17T10:48:29.882Z"
        },
        {
          "subject": "Checking File Existence",
          "description": "I've located the likely path to the default template file, based on the component templates directory structure. I'm now verifying the existence of `/bitrix/components/bitrix/main.profile/templates/.default/template.php`. If this file isn't present, further investigation into alternate template locations will be needed.",
          "timestamp": "2025-10-17T10:48:29.884Z"
        }
      ],
      "model": "gemini-2.5-pro",
      "tokens": {
        "input": 48455,
        "output": 22,
        "cached": 47223,
        "thoughts": 85,
        "tool": 0,
        "total": 48562
      }
    },
    {
      "id": "7d520527-b9a3-4b7a-b15a-367d64a0c517",
      "timestamp": "2025-10-17T10:48:45.193Z",
      "type": "gemini",
      "content": "I will create the directory for the custom template. This will allow me to override the default component template and make the necessary changes to the user profile page.",
      "thoughts": [
        {
          "subject": "Examining the File Path",
          "description": "I've located the `template.php` file, and confirmed its location. My next action is to establish the new directory structure for the custom template. I'm focusing on creating the directories at `/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main`.",
          "timestamp": "2025-10-17T10:48:44.992Z"
        },
        {
          "subject": "Analyzing the Next Steps",
          "description": "My focus has shifted to the next phase: replicating and modifying the template file. I've broken it down into actionable steps, starting with directory creation using `run_shell_command`. Following that, I'll read and write the file content. Finally, I will edit the new file, removing unnecessary elements.",
          "timestamp": "2025-10-17T10:48:45.149Z"
        }
      ],
      "tokens": {
        "input": 48582,
        "output": 113,
        "cached": 3625,
        "thoughts": 252,
        "tool": 0,
        "total": 48947
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "run_shell_command-1760698125191-2a78567ab19c2",
          "name": "run_shell_command",
          "args": {
            "command": "mkdir -p /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/",
            "description": "Create a directory for the custom template of the main.profile component. This will allow overriding the default user profile page design to implement the requested changes."
          },
          "result": [
            {
              "functionResponse": {
                "id": "run_shell_command-1760698125191-2a78567ab19c2",
                "name": "run_shell_command",
                "response": {
                  "output": "Command: mkdir -p /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/\nDirectory: (root)\nOutput: (empty)\nError: (none)\nExit Code: 0\nSignal: 0\nBackground PIDs: (none)\nProcess Group PGID: 2743382"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:49:12.800Z",
          "resultDisplay": "",
          "displayName": "Shell",
          "description": "This tool executes a given shell command as `bash -c <command>`. Command can start background processes using `&`. Command is executed as a subprocess that leads its own process group. Command process group can be terminated as `kill -- -PGID` or signaled as `kill -s SIGNAL -- -PGID`.\n\n      The following information is returned:\n\n      Command: Executed command.\n      Directory: Directory where command was executed, or `(root)`.\n      Stdout: Output on stdout stream. Can be `(empty)` or partial on error and for any unwaited background processes.\n      Stderr: Output on stderr stream. Can be `(empty)` or partial on error and for any unwaited background processes.\n      Error: Error or `(none)` if no error was reported for the subprocess.\n      Exit Code: Exit code or `(none)` if terminated by signal.\n      Signal: Signal number or `(none)` if no signal was received.\n      Background PIDs: List of background processes started or `(none)`.\n      Process Group PGID: Process group started or `(none)`",
          "renderOutputAsMarkdown": false
        }
      ]
    },
    {
      "id": "bfc23782-fbe2-48ae-9026-f4b031305eca",
      "timestamp": "2025-10-17T10:49:18.963Z",
      "type": "gemini",
      "content": "",
      "toolCalls": [
        {
          "id": "read_file-1760698158911-5a9ef04e3abf9",
          "name": "read_file",
          "args": {
            "absolute_path": "/home/c/contes1u/btx.edsy.ru/public_html/bitrix/components/bitrix/main.profile/templates/.default/template.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "read_file-1760698158911-5a9ef04e3abf9",
                "name": "read_file",
                "response": {
                  "output": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>,\n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:?>\n\n<script>\nvar opened_sections = [<?\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\".implode(\"', '\", explode(\",\", $arResult[\"opened\"])).\"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>];\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? ' SELECTED=\"SELECTED\"' : '')?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? ' SELECTED=\"SELECTED\"' : '')?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>>\n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? ' SELECTED=\"SELECTED\"' : '')?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \" SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \" SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\tif ($arResult[\"INCLUDE_FORUM\"] == \"Y\")\n\t{\n\t?>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('forum')\"><?=GetMessage(\"forum_INFO\")?></a></div>\n<div id=\"user_div_forum\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"forum\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SHOW_NAME\")?></td>\n\t\t\t<td><input type=\"hidden\" name=\"forum_SHOW_NAME\" value=\"N\" /><input type=\"checkbox\" name=\"forum_SHOW_NAME\" value=\"Y\" <?if ($arResult[\"arForumUser\"][\"SHOW_NAME\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_DESCRIPTION')?></td>\n\t\t\t<td><input type=\"text\" name=\"forum_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arForumUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_INTERESTS\"><?=$arResult[\"arForumUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SIGNATURE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_SIGNATURE\"><?=$arResult[\"arForumUser\"][\"SIGNATURE\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arForumUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arForumUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arForumUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n\t<?\n\t}\n\t?>\n\t<?\n\tif ($arResult[\"INCLUDE_BLOG\"] == \"Y\")\n\t{\n\t?>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('blog')\"><?=GetMessage(\"blog_INFO\")?></a></div>\n<div id=\"user_div_blog\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"blog\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_ALIAS')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_ALIAS\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"ALIAS\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_DESCRIPTION')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" class=\"typearea\" name=\"blog_INTERESTS\"><?echo $arResult[\"arBlogUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"blog_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arBlogUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arBlogUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arBlogUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\t}\n\t?>\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:49:18.961Z",
          "resultDisplay": "",
          "displayName": "ReadFile",
          "description": "Reads and returns the content of a specified file. If the file is large, the content will be truncated. The tool's response will clearly indicate if truncation has occurred and will provide details on how to read more of the file using the 'offset' and 'limit' parameters. Handles text, images (PNG, JPG, GIF, WEBP, SVG, BMP), and PDF files. For text files, it can read specific line ranges.",
          "renderOutputAsMarkdown": true
        }
      ],
      "thoughts": [
        {
          "subject": "Creating the Directory",
          "description": "I've just finished the initial creation, now I'll shift gears and move onto the file operations. The template will be my next focus, and I'll begin by opening and reading its contents.",
          "timestamp": "2025-10-17T10:49:18.894Z"
        }
      ],
      "model": "gemini-2.5-pro",
      "tokens": {
        "input": 48799,
        "output": 47,
        "cached": 1804,
        "thoughts": 20,
        "tool": 0,
        "total": 48866
      }
    },
    {
      "id": "7020c99a-a086-4692-b380-adcde865fdcd",
      "timestamp": "2025-10-17T10:50:28.873Z",
      "type": "gemini",
      "content": "I will now write the original template content to the new file. This will create a copy of the template that I can then modify to implement the required changes without affecting the original.",
      "thoughts": [
        {
          "subject": "Creating the File Content",
          "description": "I'm now writing the content from the default template to the new file. I am verifying the write operation to ensure no errors occurred during file creation.",
          "timestamp": "2025-10-17T10:49:24.597Z"
        }
      ],
      "tokens": {
        "input": 55740,
        "output": 6978,
        "cached": 0,
        "thoughts": 24,
        "tool": 0,
        "total": 62742
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "write_file-1760698228864-aed8601b9efbb",
          "name": "write_file",
          "args": {
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "content": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\tif ($arResult[\"INCLUDE_FORUM\"] == \"Y\")\n\t{\n\t?>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('forum')\"><?=GetMessage(\"forum_INFO\")?></a></div>\n<div id=\"user_div_forum\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"forum\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SHOW_NAME\")?></td>\n\t\t\t<td><input type=\"hidden\" name=\"forum_SHOW_NAME\" value=\"N\" /><input type=\"checkbox\" name=\"forum_SHOW_NAME\" value=\"Y\" <?if ($arResult[\"arForumUser\"][\"SHOW_NAME\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_DESCRIPTION')?></td>\n\t\t\t<td><input type=\"text\" name=\"forum_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arForumUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_INTERESTS\"><?=$arResult[\"arForumUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SIGNATURE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_SIGNATURE\"><?=$arResult[\"arForumUser\"][\"SIGNATURE\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arForumUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arForumUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arForumUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n\t<?\n\t}\n\t?>\n\t<?\n\tif ($arResult[\"INCLUDE_BLOG\"] == \"Y\")\n\t{\n\t?>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('blog')\"><?=GetMessage(\"blog_INFO\")?></a></div>\n<div id=\"user_div_blog\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"blog\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_ALIAS')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_ALIAS\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"ALIAS\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_DESCRIPTION')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" class=\"typearea\" name=\"blog_INTERESTS\"><?echo $arResult[\"arBlogUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"blog_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arBlogUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arBlogUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arBlogUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\t}\n\t?>\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n"
          },
          "result": [
            {
              "functionResponse": {
                "id": "write_file-1760698228864-aed8601b9efbb",
                "name": "write_file",
                "response": {
                  "output": "Successfully created and wrote to new file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php."
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:51:18.850Z",
          "displayName": "WriteFile",
          "description": "Writes content to a specified file in the local filesystem.\n\n      The user has the ability to modify `content`. If modified, this will be stated in the response.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "3482db58-82df-4e8a-bb4f-b13ed41477fb",
      "timestamp": "2025-10-17T10:53:36.338Z",
      "type": "gemini",
      "content": "I will now modify the template file to remove the unnecessary sections and fields as requested by the user. This will be done in a single operation to efficiently update the file.",
      "thoughts": [
        {
          "subject": "Adapting the Template",
          "description": "I've got the template copied and I'm diving in. My first task is to strip out the \"Forum Profile\" section. I'm going to delete the corresponding HTML block, starting with the `<div>` tag. This should clean things up nicely.",
          "timestamp": "2025-10-17T10:51:28.313Z"
        },
        {
          "subject": "Initiating the Modifications",
          "description": "I'm systematically removing the specified profile sections. \"Forum Profile\" is gone. Next up is the \"Blog Profile,\" which will be excised with prejudice, followed by the Student Profile. After those are deleted, I'll tackle the social network login buttons.",
          "timestamp": "2025-10-17T10:51:28.992Z"
        },
        {
          "subject": "Refining the Approach",
          "description": "I'm switching gears, moving to a single `replace` call to make the deletions more efficient, incorporating the logic for steps 1 through 5. It's a single, comprehensive operation now, which should speed things up considerably. I will then move on to the redesign phase.",
          "timestamp": "2025-10-17T10:53:36.209Z"
        }
      ],
      "tokens": {
        "input": 62777,
        "output": 12292,
        "cached": 3389,
        "thoughts": 362,
        "tool": 0,
        "total": 75431
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760698416327-3a1842e3dcbfb",
          "name": "replace",
          "args": {
            "new_string": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n\n<?endif?>\n\n</div>\n",
            "instruction": "Remove the 'Forum Profile', 'Blog Profile', 'Student Profile', and social network login sections from the user profile page. Also, remove the 'ICQ', 'Pager', and 'Fax' fields from both the 'Personal data' and 'Work information' sections to simplify the form and align with the updated design requirements.",
            "old_string": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>,\n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:?>\n\n<script>\nvar opened_sections = [<?\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\".implode(\"', '\", explode(\",\", $arResult[\"opened\"])).\"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>];\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? ' SELECTED=\"SELECTED\"' : '')?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? ' SELECTED=\"SELECTED\"' : '')?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>>\n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? ' SELECTED=\"SELECTED\"' : '')?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \" SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \" SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\tif ($arResult[\"INCLUDE_FORUM\"] == \"Y\")\n\t{\n\t?>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('forum')\"><?=GetMessage(\"forum_INFO\")?></a></div>\n<div id=\"user_div_forum\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"forum\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SHOW_NAME\")?></td>\n\t\t\t<td><input type=\"hidden\" name=\"forum_SHOW_NAME\" value=\"N\" /><input type=\"checkbox\" name=\"forum_SHOW_NAME\" value=\"Y\" <?if ($arResult[\"arForumUser\"][\"SHOW_NAME\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_DESCRIPTION')?></td>\n\t\t\t<td><input type=\"text\" name=\"forum_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arForumUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_INTERESTS\"><?=$arResult[\"arForumUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SIGNATURE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_SIGNATURE\"><?=$arResult[\"arForumUser\"][\"SIGNATURE\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arForumUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arForumUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arForumUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n\t<?\n\t}\n\t?>\n\t<?\n\tif ($arResult[\"INCLUDE_BLOG\"] == \"Y\")\n\t{\n\t?>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('blog')\"><?=GetMessage(\"blog_INFO\")?></a></div>\n<div id=\"user_div_blog\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"blog\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_ALIAS')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_ALIAS\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"ALIAS\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_DESCRIPTION')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" class=\"typearea\" name=\"blog_INTERESTS\"><?echo $arResult[\"arBlogUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"blog_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arBlogUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arBlogUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arBlogUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\t}\n\t?>\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arResultField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n",
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760698416327-3a1842e3dcbfb",
                "name": "replace",
                "response": {
                  "error": "Failed to edit, 0 occurrences found for old_string (<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>,\n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:?>\n\n<script>\nvar opened_sections = [<?\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\".implode(\"', '\", explode(\",\", $arResult[\"opened\"])).\"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>];\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? ' SELECTED=\"SELECTED\"' : '')?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? ' SELECTED=\"SELECTED\"' : '')?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>>\n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? ' SELECTED=\"SELECTED\"' : '')?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \" SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \" SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\tif ($arResult[\"INCLUDE_FORUM\"] == \"Y\")\n\t{\n\t?>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('forum')\"><?=GetMessage(\"forum_INFO\")?></a></div>\n<div id=\"user_div_forum\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"forum\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SHOW_NAME\")?></td>\n\t\t\t<td><input type=\"hidden\" name=\"forum_SHOW_NAME\" value=\"N\" /><input type=\"checkbox\" name=\"forum_SHOW_NAME\" value=\"Y\" <?if ($arResult[\"arForumUser\"][\"SHOW_NAME\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_DESCRIPTION')?></td>\n\t\t\t<td><input type=\"text\" name=\"forum_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arForumUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_INTERESTS\"><?=$arResult[\"arForumUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SIGNATURE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_SIGNATURE\"><?=$arResult[\"arForumUser\"][\"SIGNATURE\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arForumUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arForumUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arForumUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n\t<?\n\t}\n\t?>\n\t<?\n\tif ($arResult[\"INCLUDE_BLOG\"] == \"Y\")\n\t{\n\t?>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('blog')\"><?=GetMessage(\"blog_INFO\")?></a></div>\n<div id=\"user_div_blog\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"blog\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_ALIAS')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_ALIAS\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"ALIAS\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_DESCRIPTION')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" class=\"typearea\" name=\"blog_INTERESTS\"><?echo $arResult[\"arBlogUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"blog_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arBlogUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arBlogUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arBlogUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\t}\n\t?>\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arResultField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n). Original old_string was (<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>,\n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:?>\n\n<script>\nvar opened_sections = [<?\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\".implode(\"', '\", explode(\",\", $arResult[\"opened\"])).\"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>];\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? ' SELECTED=\"SELECTED\"' : '')?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? ' SELECTED=\"SELECTED\"' : '')?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>>\n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? ' SELECTED=\"SELECTED\"' : '')?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \" SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \" SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\tif ($arResult[\"INCLUDE_FORUM\"] == \"Y\")\n\t{\n\t?>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('forum')\"><?=GetMessage(\"forum_INFO\")?></a></div>\n<div id=\"user_div_forum\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"forum\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SHOW_NAME\")?></td>\n\t\t\t<td><input type=\"hidden\" name=\"forum_SHOW_NAME\" value=\"N\" /><input type=\"checkbox\" name=\"forum_SHOW_NAME\" value=\"Y\" <?if ($arResult[\"arForumUser\"][\"SHOW_NAME\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_DESCRIPTION')?></td>\n\t\t\t<td><input type=\"text\" name=\"forum_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arForumUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_INTERESTS\"><?=$arResult[\"arForumUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SIGNATURE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_SIGNATURE\"><?=$arResult[\"arForumUser\"][\"SIGNATURE\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arForumUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arForumUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arForumUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n\t<?\n\t}\n\t?>\n\t<?\n\tif ($arResult[\"INCLUDE_BLOG\"] == \"Y\")\n\t{\n\t?>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('blog')\"><?=GetMessage(\"blog_INFO\")?></a></div>\n<div id=\"user_div_blog\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"blog\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_ALIAS')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_ALIAS\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"ALIAS\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_DESCRIPTION')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" class=\"typearea\" name=\"blog_INTERESTS\"><?echo $arResult[\"arBlogUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"blog_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arBlogUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arBlogUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arBlogUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\t}\n\t?>\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arResultField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n) in /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php. No edits made. The exact text in old_string was not found. Ensure you're not escaping content incorrectly and check whitespace, indentation, and context. Use read_file tool to verify."
                }
              }
            }
          ],
          "status": "error",
          "timestamp": "2025-10-17T10:54:53.235Z",
          "resultDisplay": "Failed to edit, 0 occurrences found for old_string (<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>,\n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:?>\n\n<script>\nvar opened_sections = [<?\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\".implode(\"', '\", explode(\",\", $arResult[\"opened\"])).\"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>];\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? ' SELECTED=\"SELECTED\"' : '')?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? ' SELECTED=\"SELECTED\"' : '')?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>>\n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? ' SELECTED=\"SELECTED\"' : '')?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \" SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \" SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\tif ($arResult[\"INCLUDE_FORUM\"] == \"Y\")\n\t{\n\t?>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('forum')\"><?=GetMessage(\"forum_INFO\")?></a></div>\n<div id=\"user_div_forum\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"forum\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SHOW_NAME\")?></td>\n\t\t\t<td><input type=\"hidden\" name=\"forum_SHOW_NAME\" value=\"N\" /><input type=\"checkbox\" name=\"forum_SHOW_NAME\" value=\"Y\" <?if ($arResult[\"arForumUser\"][\"SHOW_NAME\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_DESCRIPTION')?></td>\n\t\t\t<td><input type=\"text\" name=\"forum_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arForumUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_INTERESTS\"><?=$arResult[\"arForumUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SIGNATURE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_SIGNATURE\"><?=$arResult[\"arForumUser\"][\"SIGNATURE\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arForumUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arForumUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arForumUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n\t<?\n\t}\n\t?>\n\t<?\n\tif ($arResult[\"INCLUDE_BLOG\"] == \"Y\")\n\t{\n\t?>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('blog')\"><?=GetMessage(\"blog_INFO\")?></a></div>\n<div id=\"user_div_blog\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"blog\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_ALIAS')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_ALIAS\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"ALIAS\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_DESCRIPTION')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" class=\"typearea\" name=\"blog_INTERESTS\"><?echo $arResult[\"arBlogUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"blog_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arBlogUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arBlogUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arBlogUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\t}\n\t?>\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arResultField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n). Original old_string was (<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>,\n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:?>\n\n<script>\nvar opened_sections = [<?\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\".implode(\"', '\", explode(\",\", $arResult[\"opened\"])).\"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>];\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? ' SELECTED=\"SELECTED\"' : '')?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? ' SELECTED=\"SELECTED\"' : '')?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>>\n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? ' SELECTED=\"SELECTED\"' : '')?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \" SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \" SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\tif ($arResult[\"INCLUDE_FORUM\"] == \"Y\")\n\t{\n\t?>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('forum')\"><?=GetMessage(\"forum_INFO\")?></a></div>\n<div id=\"user_div_forum\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"forum\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SHOW_NAME\")?></td>\n\t\t\t<td><input type=\"hidden\" name=\"forum_SHOW_NAME\" value=\"N\" /><input type=\"checkbox\" name=\"forum_SHOW_NAME\" value=\"Y\" <?if ($arResult[\"arForumUser\"][\"SHOW_NAME\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_DESCRIPTION')?></td>\n\t\t\t<td><input type=\"text\" name=\"forum_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arForumUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_INTERESTS\"><?=$arResult[\"arForumUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SIGNATURE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_SIGNATURE\"><?=$arResult[\"arForumUser\"][\"SIGNATURE\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arForumUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arForumUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arForumUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n\t<?\n\t}\n\t?>\n\t<?\n\tif ($arResult[\"INCLUDE_BLOG\"] == \"Y\")\n\t{\n\t?>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('blog')\"><?=GetMessage(\"blog_INFO\")?></a></div>\n<div id=\"user_div_blog\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"blog\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_ALIAS')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_ALIAS\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"ALIAS\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_DESCRIPTION')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" class=\"typearea\" name=\"blog_INTERESTS\"><?echo $arResult[\"arBlogUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"blog_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arBlogUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arBlogUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arBlogUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\t}\n\t?>\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arResultField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n) in /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php. No edits made. The exact text in old_string was not found. Ensure you're not escaping content incorrectly and check whitespace, indentation, and context. Use read_file tool to verify.",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "ae400c8a-9c06-4b08-97c8-66ecf73d1b16",
      "timestamp": "2025-10-17T10:54:59.965Z",
      "type": "gemini",
      "content": "The previous attempt to modify the file failed because the content I was trying to replace didn't exactly match the file's content. I'll now reread the file to get the correct content and then try to remove the \"Forum Profile\" section again, ensuring an exact match this time.",
      "thoughts": [
        {
          "subject": "Troubleshooting the Replacement",
          "description": "I realized the initial replacement failed because of a mismatch. Likely, there were subtle whitespace or line ending issues. I've decided to tackle this by removing sections individually, starting with \"Forum Profile.\" Careful attention to detail will be key.",
          "timestamp": "2025-10-17T10:54:59.873Z"
        },
        {
          "subject": "Analyzing the Discrepancy",
          "description": "I'm focusing on the exact differences causing the `replace` command failure. It's likely a whitespace or newline character issue, as suspected. Right now, I'm verifying the \"Forum Profile\" section's content. I'll read the file again to ensure accurate `old_string` values. Precision is paramount to avoid repeating the previous error.",
          "timestamp": "2025-10-17T10:54:59.898Z"
        }
      ],
      "tokens": {
        "input": 88959,
        "output": 110,
        "cached": 3185,
        "thoughts": 97,
        "tool": 0,
        "total": 89166
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "read_file-1760698499962-ac4731f700a9a",
          "name": "read_file",
          "args": {
            "absolute_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "read_file-1760698499962-ac4731f700a9a",
                "name": "read_file",
                "response": {
                  "output": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\tif ($arResult[\"INCLUDE_FORUM\"] == \"Y\")\n\t{\n\t?>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('forum')\"><?=GetMessage(\"forum_INFO\")?></a></div>\n<div id=\"user_div_forum\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"forum\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SHOW_NAME\")?></td>\n\t\t\t<td><input type=\"hidden\" name=\"forum_SHOW_NAME\" value=\"N\" /><input type=\"checkbox\" name=\"forum_SHOW_NAME\" value=\"Y\" <?if ($arResult[\"arForumUser\"][\"SHOW_NAME\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_DESCRIPTION')?></td>\n\t\t\t<td><input type=\"text\" name=\"forum_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arForumUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_INTERESTS\"><?=$arResult[\"arForumUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SIGNATURE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_SIGNATURE\"><?=$arResult[\"arForumUser\"][\"SIGNATURE\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arForumUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arForumUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arForumUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n\t<?\n\t}\n\t?>\n\t<?\n\tif ($arResult[\"INCLUDE_BLOG\"] == \"Y\")\n\t{\n\t?>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('blog')\"><?=GetMessage(\"blog_INFO\")?></a></div>\n<div id=\"user_div_blog\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"blog\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_ALIAS')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_ALIAS\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"ALIAS\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_DESCRIPTION')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" class=\"typearea\" name=\"blog_INTERESTS\"><?echo $arResult[\"arBlogUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"blog_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arBlogUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arBlogUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arBlogUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\t}\n\t?>\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:55:00.048Z",
          "resultDisplay": "",
          "displayName": "ReadFile",
          "description": "Reads and returns the content of a specified file. If the file is large, the content will be truncated. The tool's response will clearly indicate if truncation has occurred and will provide details on how to read more of the file using the 'offset' and 'limit' parameters. Handles text, images (PNG, JPG, GIF, WEBP, SVG, BMP), and PDF files. For text files, it can read specific line ranges.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "6b94ea38-9927-41a0-956c-26128de7b8d0",
      "timestamp": "2025-10-17T10:55:12.356Z",
      "type": "gemini",
      "content": "`replace` failed, likely due to character misinterpretation. I'll now remove the \"Forum Profile\" section with a smaller `old_string` to isolate the problem.",
      "thoughts": [
        {
          "subject": "Debugging the Replacement Issue",
          "description": "My attempt to replace certain strings keeps failing. It's frustrating! I suspect character misinterpretations are the culprit, so I'm now trying to isolate the problem. The plan is to remove sections progressively, and to use a smaller `old_string` value, beginning with the \"Forum Profile\" section, to zero in on the problematic characters.",
          "timestamp": "2025-10-17T10:55:06.620Z"
        }
      ],
      "tokens": {
        "input": 95964,
        "output": 612,
        "cached": 0,
        "thoughts": 62,
        "tool": 0,
        "total": 96638
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760698512352-042ddda2a2cf",
          "name": "replace",
          "args": {
            "instruction": "Remove the 'Forum Profile' section from the user profile page.",
            "old_string": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\tif ($arResult[\"INCLUDE_FORUM\"] == \"Y\")\n\t{\n\t?>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('forum')\"><?=GetMessage(\"forum_INFO\")?></a></div>\n<div id=\"user_div_forum\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"forum\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SHOW_NAME\")?></td>\n\t\t\t<td><input type=\"hidden\" name=\"forum_SHOW_NAME\" value=\"N\" /><input type=\"checkbox\" name=\"forum_SHOW_NAME\" value=\"Y\" <?if ($arResult[\"arForumUser\"][\"SHOW_NAME\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_DESCRIPTION')?></td>\n\t\t\t<td><input type=\"text\" name=\"forum_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arForumUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('forum_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_INTERESTS\"><?=$arResult[\"arForumUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_SIGNATURE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"forum_SIGNATURE\"><?=$arResult[\"arForumUser\"][\"SIGNATURE\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"forum_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arForumUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arForumUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arForumUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n\t<?\n\t}\n\t?>\n\t<?\n\tif ($arResult[\"INCLUDE_BLOG\"] == \"Y\")\n\t{\n\t?>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('blog')\"><?=GetMessage(\"blog_INFO\")?></a></div>\n<div id=\"user_div_blog\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"blog\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_ALIAS')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_ALIAS\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"ALIAS\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_DESCRIPTION')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" class=\"typearea\" name=\"blog_INTERESTS\"><?echo $arResult[\"arBlogUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"blog_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arBlogUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arBlogUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arBlogUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\t}\n\t?>\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n",
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "new_string": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t<?\n\tif ($arResult[\"INCLUDE_BLOG\"] == \"Y\")\n\t{\n\t?>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('blog')\"><?=GetMessage(\"blog_INFO\")?></a></div>\n<div id=\"user_div_blog\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"blog\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_ALIAS')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_ALIAS\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"ALIAS\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_DESCRIPTION')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" class=\"typearea\" name=\"blog_INTERESTS\"><?echo $arResult[\"arBlogUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"blog_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arBlogUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arBlogUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arBlogUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\t}\n\t?>\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n"
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760698512352-042ddda2a2cf",
                "name": "replace",
                "response": {
                  "output": "Successfully modified file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php (1 replacements)."
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:55:16.099Z",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "c3794881-9974-40d8-b514-52d13f967859",
      "timestamp": "2025-10-17T10:55:29.307Z",
      "type": "gemini",
      "content": "\"Forum Profile\" is gone. Now, to remove \"Blog Profile\" and the rest.",
      "thoughts": [
        {
          "subject": "Deleting Unnecessary Fields",
          "description": "I've made headway! The \"Forum Profile\" is gone. Now, the \"Blog Profile\" section is next on the chopping block. It's all about streamlining and making it lean.",
          "timestamp": "2025-10-17T10:55:29.281Z"
        }
      ],
      "tokens": {
        "input": 109399,
        "output": 527,
        "cached": 49658,
        "thoughts": 39,
        "tool": 0,
        "total": 109965
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760698529304-a71ec8ee792b2",
          "name": "replace",
          "args": {
            "new_string": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n",
            "old_string": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t<?\n\tif ($arResult[\"INCLUDE_BLOG\"] == \"Y\")\n\t{\n\t?>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('blog')\"><?=GetMessage(\"blog_INFO\")?></a></div>\n<div id=\"user_div_blog\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"blog\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_ALIAS')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_ALIAS\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"ALIAS\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_DESCRIPTION')?></td>\n\t\t\t<td><input class=\"typeinput\" type=\"text\" name=\"blog_DESCRIPTION\" maxlength=\"255\" value=\"<?=$arResult[\"arBlogUser\"][\"DESCRIPTION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('blog_INTERESTS')?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" class=\"typearea\" name=\"blog_INTERESTS\"><?echo $arResult[\"arBlogUser\"][\"INTERESTS\"]; ?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"blog_AVATAR\")?></td>\n\t\t\t<td><?=$arResult[\"arBlogUser\"][\"AVATAR_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arBlogUser\"][\"AVATAR\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arBlogUser\"][\"AVATAR_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?\n\t}\n\t?>\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n",
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "instruction": "Remove the 'Blog Profile' section from the user profile page."
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760698529304-a71ec8ee792b2",
                "name": "replace",
                "response": {
                  "output": "Successfully modified file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php (1 replacements)."
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:55:42.850Z",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "478386bb-de85-4d9c-a93d-d2de6fe4846f",
      "timestamp": "2025-10-17T10:57:34.071Z",
      "type": "gemini",
      "content": "\"Blog Profile\" section removed. Now removing \"Student Profile.\"",
      "thoughts": [
        {
          "subject": "Proceeding with Removal",
          "description": "I've successfully deleted the \"Blog Profile\" section. My focus now is entirely on eliminating the \"Student Profile\" section. This process appears straightforward, and I anticipate its removal shortly.",
          "timestamp": "2025-10-17T10:57:33.961Z"
        }
      ],
      "tokens": {
        "input": 121871,
        "output": 12128,
        "cached": 82900,
        "thoughts": 26,
        "tool": 0,
        "total": 134025
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760698654066-1f97f54b2241b",
          "name": "replace",
          "args": {
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "old_string": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n",
            "instruction": "Remove the 'Student Profile' section from the user profile page.",
            "new_string": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>,\n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n"
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760698654066-1f97f54b2241b",
                "name": "replace",
                "response": {
                  "output": "Successfully modified file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php (1 replacements)."
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T10:58:39.791Z",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "7d2ae66b-62ea-4a57-810b-ecc89b03f641",
      "timestamp": "2025-10-17T10:58:46.470Z",
      "type": "gemini",
      "content": "Okay, \"Student Profile\" is gone. Now, to remove the social network login buttons.",
      "thoughts": [
        {
          "subject": "Proceeding with Removal",
          "description": "I've just successfully eliminated the \"Student Profile\" section. My next task is to get rid of the social network login buttons. I anticipate a straightforward deletion, similar to the profile removal.",
          "timestamp": "2025-10-17T10:58:46.435Z"
        }
      ],
      "tokens": {
        "input": 139485,
        "output": 159,
        "cached": 118379,
        "thoughts": 25,
        "tool": 0,
        "total": 139669
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760698726467-abaf2c60c5551",
          "name": "replace",
          "args": {
            "new_string": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>,\n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n",
            "instruction": "Remove the social network login buttons from the user profile page.",
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "old_string": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>,\n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n"
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760698726467-abaf2c60c5551",
                "name": "replace",
                "response": {
                  "output": "Successfully modified file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php (1 replacements)."
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T11:00:13.771Z",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "5a642270-c516-426b-8058-e493637f723c",
      "timestamp": "2025-10-17T11:00:22.277Z",
      "type": "gemini",
      "content": "Okay, social logins are out. Next, I'm removing ICQ, PAGER, and FAX fields in one go.",
      "thoughts": [
        {
          "subject": "Eliminating Obsolete Fields",
          "description": "I've already zapped the social network logins. Moving on, I'm now streamlining the form. I'm targeting the `ICQ`, `P AGER`, and `FAX` fields for removal. Efficiency is key, so I'll achieve this with a single, elegant `replace` call.",
          "timestamp": "2025-10-17T11:00:22.231Z"
        }
      ],
      "tokens": {
        "input": 162604,
        "output": 369,
        "cached": 135079,
        "thoughts": 43,
        "tool": 0,
        "total": 163016
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760698822259-dafd9fea39983",
          "name": "replace",
          "args": {
            "new_string": "",
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "instruction": "Remove the ICQ, Pager, and Fax fields from the user profile page.",
            "old_string": "<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>"
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760698822259-dafd9fea39983",
                "name": "replace",
                "response": {
                  "error": "Failed to edit, 0 occurrences found for old_string (<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>). Original old_string was (<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>) in /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php. No edits made. The exact text in old_string was not found. Ensure you're not escaping content incorrectly and check whitespace, indentation, and context. Use read_file tool to verify."
                }
              }
            }
          ],
          "status": "error",
          "timestamp": "2025-10-17T11:00:52.532Z",
          "resultDisplay": "Failed to edit, 0 occurrences found for old_string (<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>). Original old_string was (<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>) in /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php. No edits made. The exact text in old_string was not found. Ensure you're not escaping content incorrectly and check whitespace, indentation, and context. Use read_file tool to verify.",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "f9b47ce1-4a81-4358-8fad-06442141f7d9",
      "timestamp": "2025-10-17T11:00:58.011Z",
      "type": "gemini",
      "content": "`replace` failed. I'll try removing fields individually, starting with `ICQ`.",
      "thoughts": [
        {
          "subject": "Re-evaluating the Replace",
          "description": "The `replace` command continues to cause issues, specifically when attempting to remove multiple fields simultaneously. My current strategy involves iterative refinement: eliminating fields individually, beginning with `ICQ`, to isolate the root cause of the failure. I'm hoping this will illuminate a pattern, or reveal a hidden dependency.",
          "timestamp": "2025-10-17T11:00:57.972Z"
        }
      ],
      "tokens": {
        "input": 163625,
        "output": 141,
        "cached": 161994,
        "thoughts": 44,
        "tool": 0,
        "total": 163810
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760698858006-e31675b35e74b",
          "name": "replace",
          "args": {
            "instruction": "Remove the ICQ field from the user profile page.",
            "old_string": "<?php\n\nuse Bitrix\\Main\\Web\\Json;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>,\n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n",
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "new_string": "\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n"
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760698858006-e31675b35e74b",
                "name": "replace",
                "response": {
                  "output": "Successfully modified file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php (1 replacements)."
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T11:02:09.185Z",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "e09c6b95-2479-4793-b517-b7326d463ae2",
      "timestamp": "2025-10-17T11:02:18.600Z",
      "type": "gemini",
      "content": "Okay, ICQ field is gone. Next, I'm removing the Fax and Pager fields from the \"Personal data\" section.",
      "thoughts": [
        {
          "subject": "Eliminating extraneous data",
          "description": "I've just finished the removal of the `ICQ` field. Next up, I'll be targeting the `Fax` and `Pager` fields. Streamlining this \"Personal data\" section is the immediate goal. The process is straightforward, and I anticipate a smooth transition to the next phase after this step.",
          "timestamp": "2025-10-17T11:02:18.560Z"
        }
      ],
      "tokens": {
        "input": 184028,
        "output": 309,
        "cached": 0,
        "thoughts": 34,
        "tool": 0,
        "total": 184371
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760698938595-575abf2631e6e",
          "name": "replace",
          "args": {
            "old_string": "<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>",
            "new_string": "\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>",
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "instruction": "Remove the Fax and Pager fields from the user profile page."
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760698938595-575abf2631e6e",
                "name": "replace",
                "response": {
                  "error": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
                }
              }
            }
          ],
          "status": "error",
          "timestamp": "2025-10-17T11:07:00.490Z",
          "resultDisplay": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "af81b052-344b-45c4-b928-54502f278683",
      "timestamp": "2025-10-17T11:07:10.796Z",
      "type": "gemini",
      "content": "`replace` failed due to multiple string occurrences. I'll now remove the fields from the \"Personal data\" section first, using a more specific `old_string`.",
      "thoughts": [
        {
          "subject": "Defining String Specificity",
          "description": "I've identified a `replace` command failure, caused by duplicate strings across sections. My current plan is to refine the `old_string` parameter for precision. Beginning with the \"Personal data\" section, I'll tailor the `old_string` to avoid unintended replacements.",
          "timestamp": "2025-10-17T11:07:06.582Z"
        }
      ],
      "tokens": {
        "input": 184403,
        "output": 431,
        "cached": 181439,
        "thoughts": 77,
        "tool": 0,
        "total": 184911
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760699230791-38c256a6a7644",
          "name": "replace",
          "args": {
            "old_string": "<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>",
            "new_string": "\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>",
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "instruction": "Remove the Fax and Pager fields from the 'Personal data' section of the user profile page."
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760699230791-38c256a6a7644",
                "name": "replace",
                "response": {
                  "error": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
                }
              }
            }
          ],
          "status": "error",
          "timestamp": "2025-10-17T11:07:38.098Z",
          "resultDisplay": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "3d0b5fc3-01b5-45cf-b6c3-9bb87a3d9f80",
      "timestamp": "2025-10-17T11:07:47.999Z",
      "type": "gemini",
      "content": "`replace` failed. The string is not unique. I'll add more context to the `old_string` and remove `USER_FAX` and `USER_PAGER` from the `PERSONAL` section.",
      "thoughts": [
        {
          "subject": "Analyzing Recurring Errors",
          "description": "The `replace` command continues to fail. I've pinpointed the issue: the search string's lack of specificity. My next step involves enriching the `old_string` with more contextual details to achieve a more precise match. I'm also preparing to remove `USER_FAX` and `USER_PAGER` from the `PERSONAL` section.",
          "timestamp": "2025-10-17T11:07:44.827Z"
        }
      ],
      "tokens": {
        "input": 184900,
        "output": 440,
        "cached": 160557,
        "thoughts": 64,
        "tool": 0,
        "total": 185404
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760699267995-2eaef8e47ca52",
          "name": "replace",
          "args": {
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "new_string": "\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>",
            "old_string": "<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>",
            "instruction": "Remove the Fax and Pager fields from the 'Personal data' section of the user profile page."
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760699267995-2eaef8e47ca52",
                "name": "replace",
                "response": {
                  "error": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
                }
              }
            }
          ],
          "status": "error",
          "timestamp": "2025-10-17T11:07:48.063Z",
          "resultDisplay": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "2a8b3117-c2d3-4e54-844d-9ec11673e92c",
      "timestamp": "2025-10-17T11:07:58.115Z",
      "type": "gemini",
      "content": "`replace` is failing due to unintended side effects. I'll read the file, manually remove the unwanted fields, and then overwrite the original file with the corrected content. Starting with a file read.",
      "thoughts": [
        {
          "subject": "Considering the Failure",
          "description": "The replace command is still failing; I can't isolate the \"Personal data\" section for edits. It's frustrating, as unwanted fields in that section are affecting others. A new plan is needed to avoid global changes.",
          "timestamp": "2025-10-17T11:07:57.889Z"
        },
        {
          "subject": "Planning a Rework",
          "description": "The `replace` command remains a problem. I've shifted focus: I will read the file, construct a new version by omitting unwanted fields, and then write the updated content. I'm starting by rereading the original file.",
          "timestamp": "2025-10-17T11:07:58.069Z"
        }
      ],
      "tokens": {
        "input": 185406,
        "output": 92,
        "cached": 2971,
        "thoughts": 92,
        "tool": 0,
        "total": 185590
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "read_file-1760699278111-c1769a9f531ea",
          "name": "read_file",
          "args": {
            "absolute_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "read_file-1760699278111-c1769a9f531ea",
                "name": "read_file",
                "response": {
                  "output": "\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T11:07:58.168Z",
          "resultDisplay": "",
          "displayName": "ReadFile",
          "description": "Reads and returns the content of a specified file. If the file is large, the content will be truncated. The tool's response will clearly indicate if truncation has occurred and will provide details on how to read more of the file using the 'offset' and 'limit' parameters. Handles text, images (PNG, JPG, GIF, WEBP, SVG, BMP), and PDF files. For text files, it can read specific line ranges.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "b1a37da5-3e27-44c4-b695-58c7bfb145e0",
      "timestamp": "2025-10-17T11:08:10.060Z",
      "type": "user",
      "content": "System: Please continue."
    },
    {
      "id": "71ff1c97-b263-4cf9-876e-206bff0364d7",
      "timestamp": "2025-10-17T11:08:17.831Z",
      "type": "gemini",
      "content": "`replace` failed. `old_string` is the issue. I'll try removing fields from \"Work information\" first.",
      "thoughts": [
        {
          "subject": "Addressing the Error",
          "description": "I am still troubleshooting the `replace` command. The `old_string` parameter continues to be problematic. I've decided to simplify the process and focus on removing fields from the \"Work Information\" section initially. This phased approach should help isolate the issue.",
          "timestamp": "2025-10-17T11:08:17.780Z"
        }
      ],
      "tokens": {
        "input": 194324,
        "output": 315,
        "cached": 192468,
        "thoughts": 42,
        "tool": 0,
        "total": 194681
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760699297825-3ed1c8284121c",
          "name": "replace",
          "args": {
            "new_string": "\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>",
            "old_string": "<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>",
            "instruction": "Remove the Fax and Pager fields from the 'Work information' section of the user profile page.",
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760699297825-3ed1c8284121c",
                "name": "replace",
                "response": {
                  "error": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
                }
              }
            }
          ],
          "status": "error",
          "timestamp": "2025-10-17T11:09:50.517Z",
          "resultDisplay": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "25e63610-d066-4067-b7de-bc257b85f2e2",
      "timestamp": "2025-10-17T11:10:04.973Z",
      "type": "gemini",
      "content": "`replace` failed; the `old_string` isn't unique. I'll read the file, manually remove the unwanted fields, then overwrite the original with the corrected content. Starting with a file read.",
      "thoughts": [
        {
          "subject": "Reconsidering Replacement Strategy",
          "description": "I'm hitting a snag with the `replace` command; it's failing because the search string is too common. So, I'm pivoting to a more granular strategy: I'll read the file, meticulously reconstruct the content, excluding the problematic data, and then overwrite the original using `write_file`. This should provide the precision needed for the task.",
          "timestamp": "2025-10-17T11:10:04.918Z"
        },
        {
          "subject": "Analyzing the Failure Mode",
          "description": "The `replace` command is still unreliable. The `old_string` appears too ambiguous. My updated plan is to read the file, curate the content to exclude the problematic data, and finally, employ the `write_file` function to save the refined version. I'm restarting the process with a fresh file read.",
          "timestamp": "2025-10-17T11:10:04.932Z"
        }
      ],
      "tokens": {
        "input": 194705,
        "output": 95,
        "cached": 192434,
        "thoughts": 92,
        "tool": 0,
        "total": 194892
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "read_file-1760699404968-ffb4feb5fb329",
          "name": "read_file",
          "args": {
            "absolute_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "read_file-1760699404968-ffb4feb5fb329",
                "name": "read_file",
                "response": {
                  "output": "\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T11:10:05.036Z",
          "resultDisplay": "",
          "displayName": "ReadFile",
          "description": "Reads and returns the content of a specified file. If the file is large, the content will be truncated. The tool's response will clearly indicate if truncation has occurred and will provide details on how to read more of the file using the 'offset' and 'limit' parameters. Handles text, images (PNG, JPG, GIF, WEBP, SVG, BMP), and PDF files. For text files, it can read specific line ranges.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "782fde8c-aafe-4f14-b0b9-48c6dff788df",
      "timestamp": "2025-10-17T11:10:17.299Z",
      "type": "gemini",
      "content": "`replace` is failing. I'll try removing the \"Work information\" fields individually, starting with `FAX`.",
      "thoughts": [
        {
          "subject": "Debugging the Replace Command",
          "description": "I'm still struggling with the `replace` command. It keeps failing, and I need to figure out why. My current strategy is to remove fields from the \"Work Information\" section incrementally, to isolate the problem. I'll begin by targeting the `FAX` field, hoping that removing it first will lead to a breakthrough.",
          "timestamp": "2025-10-17T11:10:17.244Z"
        }
      ],
      "tokens": {
        "input": 203621,
        "output": 149,
        "cached": 191779,
        "thoughts": 56,
        "tool": 0,
        "total": 203826
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760699417295-c439cc41d0304",
          "name": "replace",
          "args": {
            "new_string": "",
            "old_string": "<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>",
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "instruction": "Remove the Fax field from the 'Work information' section of the user profile page."
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760699417295-c439cc41d0304",
                "name": "replace",
                "response": {
                  "error": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
                }
              }
            }
          ],
          "status": "error",
          "timestamp": "2025-10-17T11:11:10.446Z",
          "resultDisplay": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "34028523-266f-4926-be65-d54c904defa9",
      "timestamp": "2025-10-17T11:11:18.276Z",
      "type": "gemini",
      "content": "`replace` failed; `old_string` is too generic. I'll add more context and remove `USER_FAX` from the `WORK` section.",
      "thoughts": [
        {
          "subject": "Attempting Precise Replacements",
          "description": "My `replace` command failed again. The `old_string` clearly needs more context to be unique. I'll add more context to the `old_string` to refine it further. Also, I will remove the `USER_FAX` from the `WORK` section.",
          "timestamp": "2025-10-17T11:11:18.219Z"
        }
      ],
      "tokens": {
        "input": 203836,
        "output": 374,
        "cached": 203555,
        "thoughts": 60,
        "tool": 0,
        "total": 204270
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760699478268-dc7dbf45b2cde",
          "name": "replace",
          "args": {
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "old_string": "<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>",
            "instruction": "Remove the Fax field from the 'Work information' section of the user profile page.",
            "new_string": "\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>"
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760699478268-dc7dbf45b2cde",
                "name": "replace",
                "response": {
                  "error": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
                }
              }
            }
          ],
          "status": "error",
          "timestamp": "2025-10-17T11:11:54.339Z",
          "resultDisplay": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "b1a7074b-ec17-4114-9711-81bc46a13589",
      "timestamp": "2025-10-17T11:12:01.936Z",
      "type": "gemini",
      "content": "`replace` is failing. I'll try removing \"Work information\" fields individually, starting with `PAGER`.",
      "thoughts": [
        {
          "subject": "Debugging Replace Failures",
          "description": "I'm still grappling with the `replace` command; it's proving stubbornly uncooperative. I'm focusing my efforts on the \"Work information\" section. My initial plan is to systematically remove fields, beginning with the `PAGER` entry, to see if I can isolate the issue causing these persistent failures.",
          "timestamp": "2025-10-17T11:12:01.876Z"
        }
      ],
      "tokens": {
        "input": 204276,
        "output": 148,
        "cached": 182859,
        "thoughts": 57,
        "tool": 0,
        "total": 204481
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "replace-1760699521931-632eb4df96aee",
          "name": "replace",
          "args": {
            "old_string": "<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>",
            "instruction": "Remove the Pager field from the 'Work information' section of the user profile page.",
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "new_string": ""
          },
          "result": [
            {
              "functionResponse": {
                "id": "replace-1760699521931-632eb4df96aee",
                "name": "replace",
                "response": {
                  "error": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
                }
              }
            }
          ],
          "status": "error",
          "timestamp": "2025-10-17T11:13:49.074Z",
          "resultDisplay": "Failed to edit, Expected 1 occurrence but found 2 for old_string in file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
          "displayName": "Edit",
          "description": "Replaces text within a file. Replaces a single occurrence. This tool requires providing significant context around the change to ensure precise targeting. Always use the read_file tool to examine the file's current content before attempting a text replacement.\n      \n      The user has the ability to modify the `new_string` content. If modified, this will be stated in the response.\n      \n      Expectation for required parameters:\n      1. `file_path` MUST be an absolute path; otherwise an error will be thrown.\n      2. `old_string` MUST be the exact literal text to replace (including all whitespace, indentation, newlines, and surrounding code etc.).\n      3. `new_string` MUST be the exact literal text to replace `old_string` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic and that `old_string` and `new_string` are different.\n      4. `instruction` is the detailed instruction of what needs to be changed. It is important to Make it specific and detailed so developers or large language models can understand what needs to be changed and perform the changes on their own if necessary. \n      5. NEVER escape `old_string` or `new_string`, that would break the exact literal text requirement.\n      **Important:** If ANY of the above are not satisfied, the tool will fail. CRITICAL for `old_string`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail.\n      6. Prefer to break down complex and long changes into multiple smaller atomic calls to this tool. Always check the content of the file after changes or not finding a string to match.\n      **Multiple replacements:** If there are multiple and ambiguous occurences of the `old_string` in the file, the tool will also fail.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "cc95abb3-81b4-4e5b-a689-9b4e1e504fe9",
      "timestamp": "2025-10-17T11:13:56.274Z",
      "type": "gemini",
      "content": "`replace` is failing to differentiate between sections. I'll revert to my original plan: read the file, manually edit the content, and then overwrite the file with the changes. First, I'll re-read the file to ensure I have the latest version.",
      "thoughts": [
        {
          "subject": "Debugging the Replace Command",
          "description": "The `replace` command is still failing; it can't differentiate between \"Personal data\" and \"Work information\" despite the `WORK_` prefixes. My workaround now is the old reliable: read the file, build the new content from scratch, and write it back.",
          "timestamp": "2025-10-17T11:13:56.191Z"
        },
        {
          "subject": "Rethinking the Strategy",
          "description": "The `replace` command is still not working as intended. The prefix strategy failed. Back to basics: I'm reading the file again to ensure I start with the current content, preparing to rebuild the file from scratch, and then using the write_file command to finish.",
          "timestamp": "2025-10-17T11:13:56.216Z"
        }
      ],
      "tokens": {
        "input": 204490,
        "output": 106,
        "cached": 203474,
        "thoughts": 99,
        "tool": 0,
        "total": 204695
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "read_file-1760699636269-f541e31b94b56",
          "name": "read_file",
          "args": {
            "absolute_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php"
          },
          "result": [
            {
              "functionResponse": {
                "id": "read_file-1760699636269-f541e31b94b56",
                "name": "read_file",
                "response": {
                  "output": "\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>,\n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>;\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ICQ')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ICQ\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ICQ\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_FAX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_FAX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_FAX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PAGER')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PAGER\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PAGER\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t\n\t\n\t<?if ($arResult[\"INCLUDE_LEARNING\"] == \"Y\"):?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('learning')\"><?=GetMessage(\"learning_INFO\")?></a></div>\n\t<div id=\"user_div_learning\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"learning\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_PUBLIC_PROFILE\");?>:</td>\n\t\t\t\t<td><input type=\"hidden\" name=\"student_PUBLIC_PROFILE\" value=\"N\" /><input type=\"checkbox\" name=\"student_PUBLIC_PROFILE\" value=\"Y\" <?if ($arResult[\"arStudent\"][\"PUBLIC_PROFILE\"]==\"Y\") echo \"checked=\\\"checked\\\"\";?> /></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_RESUME\");?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"student_RESUME\"><?=$arResult[\"arStudent\"][\"RESUME\"]; ?></textarea></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"learning_TRANSCRIPT\");?>:</td>\n\t\t\t\t<td><?=$arResult[\"arStudent\"][\"TRANSCRIPT\"];?>-<?=$arResult[\"ID\"]?></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>\n"
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T11:13:56.328Z",
          "resultDisplay": "",
          "displayName": "ReadFile",
          "description": "Reads and returns the content of a specified file. If the file is large, the content will be truncated. The tool's response will clearly indicate if truncation has occurred and will provide details on how to read more of the file using the 'offset' and 'limit' parameters. Handles text, images (PNG, JPG, GIF, WEBP, SVG, BMP), and PDF files. For text files, it can read specific line ranges.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "1e6192bc-297e-4ca8-89da-5db3ae30cbf7",
      "timestamp": "2025-10-17T11:14:52.983Z",
      "type": "gemini",
      "content": "Okay, I've reviewed the file. I'm removing the forum, blog, learning, and social services sections, plus the ICQ, Fax, and Pager fields from personal and work info. Now, I'll write the updated content.",
      "thoughts": [
        {
          "subject": "Analyzing Content Removal",
          "description": "I've successfully parsed the file content and am now focused on pruning it. The task involves methodically excising specified sections, namely forum, blog, and learning profiles, along with the social services element. Personal and work information is being streamlined by removing ICQ, Fax, and Pager details. Next steps involve writing the refined output.",
          "timestamp": "2025-10-17T11:14:03.496Z"
        },
        {
          "subject": "Implementing Pruning Strategies",
          "description": "I'm currently crafting the new version of the content. My immediate task involves excising several elements: forum, blog, and learning profiles, plus all the social services components. Details such as ICQ, Fax, and Pager are being scrubbed from personal and work sections. I will then perform a write operation to save the refined data.",
          "timestamp": "2025-10-17T11:14:03.527Z"
        }
      ],
      "tokens": {
        "input": 213417,
        "output": 5355,
        "cached": 202846,
        "thoughts": 84,
        "tool": 0,
        "total": 218856
      },
      "model": "gemini-2.5-pro",
      "toolCalls": [
        {
          "id": "write_file-1760699692971-f9c46e7ac25f9",
          "name": "write_file",
          "args": {
            "file_path": "/home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php",
            "content": "<?php\n\nuse Bitrix\bMain\bWeb\bJson;\n\n/**\n * @global CMain $APPLICATION\n * @var array $arParams\n * @var array $arResult\n */\nif(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED !== true)\n\tdie();\n\nif(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true)\n{\n\tCJSCore::Init('phone_auth');\n}\n?>\n\n<div class=\"bx-auth-profile\">\n\n<?ShowError($arResult[\"strProfileError\"]);?>\n<?\nif (isset($arResult['DATA_SAVED']) && $arResult['DATA_SAVED'] == 'Y')\n\tShowNote(GetMessage('PROFILE_DATA_SAVED'));\n?>\n\n<?if(isset($arResult[\"SHOW_SMS_FIELD\"]) && $arResult[\"SHOW_SMS_FIELD\"] == true):?>\n\n<form method=\"post\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n<input type=\"hidden\" name=\"SIGNED_DATA\" value=\"<?=htmlspecialcharsbx($arResult[\"SIGNED_DATA\"])?>\" />\n<table class=\"profile-table data-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?echo GetMessage(\"main_profile_code\")?><span class=\"starrequired\">*</span></td>\n\t\t\t<td><input size=\"30\" type=\"text\" name=\"SMS_CODE\" value=\"<?=htmlspecialcharsbx($arResult[\"SMS_CODE\"])?>\" autocomplete=\"off\" /></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><input type=\"submit\" name=\"code_submit_button\" value=\"<?echo GetMessage(\"main_profile_send\")?>\" /></p>\n\n</form>\n\n<script>\nnew BX.PhoneAuth({\n\tcontainerId: 'bx_profile_resend',\n\terrorContainerId: 'bx_profile_error',\n\tinterval: <?=$arResult[\"PHONE_CODE_RESEND_INTERVAL\"]?>, \n\tdata:\n\t\t<?= Json::encode([\n\t\t\t'signedData' => $arResult[\"SIGNED_DATA\"],\n\t\t])?>, \n\tonError:\n\t\tfunction(response)\n\t\t{\n\t\t\tvar errorDiv = BX('bx_profile_error');\n\t\t\tvar errorNode = BX.findChildByClassName(errorDiv, 'errortext');\n\t\t\terrorNode.innerHTML = '';\n\t\t\tfor(var i = 0; i < response.errors.length; i++)\n\t\t\t{\n\t\t\t\terrorNode.innerHTML = errorNode.innerHTML + BX.util.htmlspecialchars(response.errors[i].message) + '<br>';\n\t\t\t}\n\t\t\terrorDiv.style.display = '';\n\t\t}\n});\n</script>\n\n<div id=\"bx_profile_error\" style=\"display:none\"><?ShowError(\"error\")?></div>\n\n<div id=\"bx_profile_resend\"></div>\n\n<?else:\n?>\n\n<script>\nvar opened_sections = [<?\n$arResult[\"opened\"] = $_COOKIE[$arResult[\"COOKIE_PREFIX\"].\"_user_profile_open\"] ?? '';\n$arResult[\"opened\"] = preg_replace(\"/[^a-z0-9_,]/i\", \"\", $arResult[\"opened\"]);\nif ($arResult[\"opened\"] <> '')\n{\n\techo \"'\" . implode(\"', '\", explode(\",\", $arResult[\"opened\"])) . \"'\";\n}\nelse\n{\n\t$arResult[\"opened\"] = \"reg\";\n\techo \"'reg'\";\n}\n?>];\n\nvar cookie_prefix = '<?=$arResult[\"COOKIE_PREFIX\"]?>';\n</script>\n<form method=\"post\" name=\"form1\" action=\"<?=$arResult[\"FORM_TARGET\"]?>\" enctype=\"multipart/form-data\">\n<?=$arResult[\"BX_SESSION_CHECK\"]?>\n<input type=\"hidden\" name=\"lang\" value=\"<?=LANG?>\" />\n<input type=\"hidden\" name=\"ID\" value=<?=$arResult[\"ID\"]?> />\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"REG_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('reg')\"><?=GetMessage(\"REG_SHOW_HIDE\")?></a></div>\n<div class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"reg\") ? \"hidden\" : \"shown\"?>\" id=\"user_div_reg\">\n<table class=\"profile-table data-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t<?\n\tif($arResult[\"ID\"]>0)\n\t{\n\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"TIMESTAMP_X\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_UPDATE')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"TIMESTAMP_X\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t\t<?\n\t\tif ($arResult[\"arUser\"][\"LAST_LOGIN\"] <> '')\n\t\t{\n\t\t?>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('LAST_LOGIN')?></td>\n\t\t\t<td><?=$arResult[\"arUser\"][\"LAST_LOGIN\"]?></td>\n\t\t</tr>\n\t\t<?\n\t\t}\n\t\t?>\n\t<?\n\t}\n\t?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_title\")?></td>\n\t\t<td><input type=\"text\" name=\"TITLE\" value=\"<?=$arResult[\"arUser\"][\"TITLE\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NAME')?></td>\n\t\t<td><input type=\"text\" name=\"NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LAST_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"LAST_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"LAST_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('SECOND_NAME')?></td>\n\t\t<td><input type=\"text\" name=\"SECOND_NAME\" maxlength=\"50\" value=\"<?=$arResult[\"arUser\"][\"SECOND_NAME\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('LOGIN')?><span class=\"starrequired\">*</span></td>\n\t\t<td><input type=\"text\" name=\"LOGIN\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"LOGIN\"]?>\" /></td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('EMAIL')?><?if($arResult[\"EMAIL_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"EMAIL\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"EMAIL\"]?>\" /></td>\n\t</tr>\n<?if($arResult[\"PHONE_REGISTRATION\"]):\n?>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_phone_number\")?><?if($arResult[\"PHONE_REQUIRED\"]):\n?><span class=\"starrequired\">*</span><?endif?></td>\n\t\t<td><input type=\"text\" name=\"PHONE_NUMBER\" maxlength=\"50\" value=\"<? echo $arResult[\"arUser\"][\"PHONE_NUMBER\"]?>\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult['CAN_EDIT_PASSWORD']):\n?>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_REQ')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD\" maxlength=\"50\" value=\"\" autocomplete=\"off\" class=\"bx-auth-input\" />\n<?if($arResult[\"SECURE_AUTH\"]):\n?>\n\t\t\t\t<span class=\"bx-auth-secure\" id=\"bx_auth_secure\" title=\"<?echo GetMessage(\"AUTH_SECURE_NOTE\")?>\" style=\"display:none\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon\"></div>\n\t\t\t\t</span>\n\t\t\t\t<noscript>\n\t\t\t\t<span class=\"bx-auth-secure\" title=\"<?echo GetMessage(\"AUTH_NONSECURE_NOTE\")?>\">\n\t\t\t\t\t<div class=\"bx-auth-secure-icon bx-auth-secure-unlock\"></div>\n\t\t\t\t</span>\n\t\t\t\t</noscript>\n<script>\ndocument.getElementById('bx_auth_secure').style.display = 'inline-block';\n</script>\n<?endif?>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?=GetMessage('NEW_PASSWORD_CONFIRM')?></td>\n\t\t<td><input type=\"password\" name=\"NEW_PASSWORD_CONFIRM\" maxlength=\"50\" value=\"\" autocomplete=\"off\" /></td>\n\t</tr>\n<?endif?>\n<?if($arResult[\"TIME_ZONE_ENABLED\"] == true):\n?>\n\t<tr>\n\t\t<td colspan=\"2\" class=\"profile-header\"><?echo GetMessage(\"main_profile_time_zones\")?></td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_auto\")?></td>\n\t\t<td>\n\t\t\t<select name=\"AUTO_TIME_ZONE\" onchange=\"this.form.TIME_ZONE.disabled=(this.value != 'N')\">\n\t\t\t\t<option value=\"\"><?echo GetMessage(\"main_profile_time_zones_auto_def\")?></option>\n\t\t\t\t<option value=\"Y\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"Y\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_yes\")?></option>\n\t\t\t\t<option value=\"N\"<?=($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] == \"N\"? 'SELECTED=\"SELECTED\"' : ''?>><?echo GetMessage(\"main_profile_time_zones_auto_no\")?></option>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><?echo GetMessage(\"main_profile_time_zones_zones\")?></td>\n\t\t<td>\n\t\t\t<select name=\"TIME_ZONE\"<?if($arResult[\"arUser\"][\"AUTO_TIME_ZONE\"] <> \"N\") echo ' disabled=\"disabled\"'?>> \n<?foreach($arResult[\"TIME_ZONE_LIST\"] as $tz=>$tz_name):\n?>\n\t\t\t\t<option value=\"<?=htmlspecialcharsbx($tz)?>\"<?=($arResult[\"arUser\"][\"TIME_ZONE\"] == $tz? 'SELECTED=\"SELECTED\"' : ''?>><?=htmlspecialcharsbx($tz_name)?></option>\n<?endforeach?>\n\t\t\t</select>\n\t\t</td>\n\t</tr>\n<?endif?>\n\t</tbody>\n</table>\n</div>\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('personal')\"><?=GetMessage(\"USER_PERSONAL_INFO\")?></a></div>\n<div id=\"user_div_personal\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"personal\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PROFESSION')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PROFESSION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PROFESSION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_GENDER')?></td>\n\t\t\t<td><select name=\"PERSONAL_GENDER\">\n\t\t\t\t<option value=\"\"><?=GetMessage(\"USER_DONT_KNOW\")?></option>\n\t\t\t\t<option value=\"M\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"M\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_MALE\")?></option>\n\t\t\t\t<option value=\"F\"<?=$arResult[\"arUser\"][\"PERSONAL_GENDER\"] == \"F\" ? \"SELECTED=\\\"SELECTED\\\"\" : \"\"?>><?=GetMessage(\"USER_FEMALE\")?></option>\n\t\t\t</select></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_BIRTHDAY_DT\")?> (<?=$arResult[\"DATE_FORMAT\"]?>):</td>\n\t\t\t<td><?\n\t\t\t$APPLICATION->IncludeComponent(\n\t\t\t\t'bitrix:main.calendar',\n\t\t\t\t'',\n\t\t\t\tarray(\n\t\t\t\t\t'SHOW_INPUT' => 'Y',\n\t\t\t\t\t'FORM_NAME' => 'form1',\n\t\t\t\t\t'INPUT_NAME' => 'PERSONAL_BIRTHDAY',\n\t\t\t\t\t'INPUT_VALUE' => $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"],\n\t\t\t\t\t'SHOW_TIME' => 'N'\n\t\t\t\t),\n\t\t\t\tnull,\n\t\t\t\tarray('HIDE_ICONS' => 'Y')\n\t\t\t);\n\n\t\t\t//=CalendarDate(\"PERSONAL_BIRTHDAY\", $arResult[\"arUser\"][\"PERSONAL_BIRTHDAY\"], \"form1\", \"15\")\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_PHOTO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"PERSONAL_PHOTO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t<br />\n\t\t\t\t<?=$arResult[\"arUser\"][\"PERSONAL_PHOTO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MOBILE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MOBILE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MOBILE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_STREET\"><?=$arResult[\"arUser\"][\"PERSONAL_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"PERSONAL_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"PERSONAL_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"PERSONAL_NOTES\"><?=$arResult[\"arUser\"][\"PERSONAL_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\n<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('work')\"><?=GetMessage(\"USER_WORK_INFO\")?></a></div>\n<div id=\"user_div_work\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"work\") ? \"hidden\" : \"shown\"?>\">\n<table class=\"data-table profile-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COMPANY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_COMPANY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_COMPANY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_WWW')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_WWW\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_WWW\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_DEPARTMENT')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_DEPARTMENT\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_DEPARTMENT\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_POSITION')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_POSITION\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_POSITION\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_WORK_PROFILE\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_PROFILE\"><?=$arResult[\"arUser\"][\"WORK_PROFILE\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_LOGO\")?></td>\n\t\t\t<td>\n\t\t\t<?=$arResult[\"arUser\"][\"WORK_LOGO_INPUT\"]?>\n\t\t\t<?\n\t\t\tif ($arResult[\"arUser\"][\"WORK_LOGO\"] <> '')\n\t\t\t{\n\t\t\t?>\n\t\t\t\t<br /><?=$arResult[\"arUser\"][\"WORK_LOGO_HTML\"]?>\n\t\t\t<?\n\t\t\t}\n\t\t\t?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_PHONES\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_PHONE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_PHONE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_PHONE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" class=\"profile-header\"><?=GetMessage(\"USER_POST_ADDRESS\")?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_COUNTRY')?></td>\n\t\t\t<td><?=$arResult[\"COUNTRY_SELECT_WORK\"]?></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_STATE')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_STATE\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_STATE\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_CITY')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_CITY\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_CITY\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_ZIP')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_ZIP\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_ZIP\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_STREET\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_STREET\"><?=$arResult[\"arUser\"][\"WORK_STREET\"]?></textarea></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage('USER_MAILBOX')?></td>\n\t\t\t<td><input type=\"text\" name=\"WORK_MAILBOX\" maxlength=\"255\" value=\"<?=$arResult[\"arUser\"][\"WORK_MAILBOX\"]?>\" /></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td><?=GetMessage(\"USER_NOTES\")?></td>\n\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"WORK_NOTES\"><?=$arResult[\"arUser\"][\"WORK_NOTES\"]?></textarea></td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>\n\t<?if($arResult[\"IS_ADMIN\"]):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('admin')\"><?=GetMessage(\"USER_ADMIN_NOTES\")?></a></div>\n\t<div id=\"user_div_admin\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"admin\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td><?=GetMessage(\"USER_ADMIN_NOTES\")?>:</td>\n\t\t\t\t<td><textarea cols=\"30\" rows=\"5\" name=\"ADMIN_NOTES\"><?=$arResult[\"arUser\"][\"ADMIN_NOTES\"]?></textarea></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ********************* User properties ***************************************************\n?>\n\t<?if($arResult[\"USER_PROPERTIES\"][\"SHOW\"] == \"Y\"):\n?>\n\t<div class=\"profile-link profile-user-div-link\"><a title=\"<?=GetMessage(\"USER_SHOW_HIDE\")?>\" href=\"javascript:void(0)\" onclick=\"SectionClick('user_properties')\"><?=trim($arParams[\"USER_PROPERTY_NAME\"]) <> '' ? $arParams[\"USER_PROPERTY_NAME\"] : GetMessage(\"USER_TYPE_EDIT_TAB\")?></a></div>\n\t<div id=\"user_div_user_properties\" class=\"profile-block-<?= !str_contains($arResult[\"opened\"], \"user_properties\") ? \"hidden\" : \"shown\"?>\">\n\t<table class=\"data-table profile-table\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">&nbsp;</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t<?$first = true;?>\n\t\t<?foreach ($arResult[\"USER_PROPERTIES\"][\"DATA\"] as $FIELD_NAME => $arUserField):\n?>\n\t\t<tr><td class=\"field-name\">\n\t\t\t<?if ($arUserField[\"MANDATORY\"]==\"Y\"):\n?>\n\t\t\t\t<span class=\"starrequired\">*</span>\n\t\t\t<?endif;?>\n\t\t\t<?=$arUserField[\"EDIT_FORM_LABEL\"]?>:</td><td class=\"field-value\">\n\t\t\t\t<?$APPLICATION->IncludeComponent(\n\t\t\t\t\t\"bitrix:system.field.edit\",\n\t\t\t\t\t$arUserField[\"USER_TYPE\"][\"USER_TYPE_ID\"],\n\t\t\t\t\tarray(\"bVarsFromForm\" => $arResult[\"bVarsFromForm\"], \"arUserField\" => $arUserField), null, array(\"HIDE_ICONS\"=>\"Y\"));?></td></tr>\n\t\t<?endforeach;?>\n\t\t</tbody>\n\t</table>\n\t</div>\n\t<?endif;?>\n\t<?// ******************** /User properties ***************************************************\n?>\n\t<p><?echo $arResult[\"GROUP_POLICY\"][\"PASSWORD_REQUIREMENTS\"];?></p>\n\t<p><input type=\"submit\" name=\"save\" value=\"<?=(($arResult[\"ID\"]>0) ? GetMessage(\"MAIN_SAVE\") : GetMessage(\"MAIN_ADD\"))?>\">&nbsp;&nbsp;<input type=\"reset\" value=\"<?=GetMessage('MAIN_RESET');?>\"></p>\n</form>\n<?\nif($arResult[\"SOCSERV_ENABLED\"])\n{\n\t$APPLICATION->IncludeComponent(\"bitrix:socserv.auth.split\", \".default\", array(\n\t\t\t\"SHOW_PROFILES\" => \"Y\",\n\t\t\t\"ALLOW_DELETE\" => \"Y\"\n\t\t),\n\t\tfalse\n\t);\n}\n?>\n\n<?endif?>\n\n</div>"
          },
          "result": [
            {
              "functionResponse": {
                "id": "write_file-1760699692971-f9c46e7ac25f9",
                "name": "write_file",
                "response": {
                  "output": "Successfully overwrote file: /home/c/contes1u/btx.edsy.ru/public_html/local/templates/edsy_main/components/bitrix/main.profile/.default/template.php."
                }
              }
            }
          ],
          "status": "success",
          "timestamp": "2025-10-17T11:28:10.848Z",
          "displayName": "WriteFile",
          "description": "Writes content to a specified file in the local filesystem.\n\n      The user has the ability to modify `content`. If modified, this will be stated in the response.",
          "renderOutputAsMarkdown": true
        }
      ]
    },
    {
      "id": "3d060281-abfd-4233-9c45-2b0b063fd26d",
      "timestamp": "2025-10-17T11:28:18.530Z",
      "type": "gemini",
      "content": "Okay, I've stripped the unnecessary elements. Time to style. I'll create and link a `style.css` file within the template directory.",
      "thoughts": [
        {
          "subject": "Refining the Approach",
          "description": "I've streamlined the structure by eliminating the unnecessary bits. The next step is integrating the design updates. I'm focusing on incorporating a CSS file into the template, intending to call it style.css. I will link it in the `template.php` file, which should make the design changes live.",
          "timestamp": "2025-10-17T11:28:18.475Z"
        }
      ],
      "tokens": {
        "input": 218908,
        "output": 84,
        "cached": 202607,
        "thoughts": 61,
        "tool": 0,
        "total": 219053
      },
      "model": "gemini-2.5-pro"
    }
  ]
}