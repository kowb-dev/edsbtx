Отличный вопрос! Реализация кастомного поиска в интернет-магазине на Битрикс — одна из самых частых задач при разработке. Давайте разберем по шагам, как это сделать правильно, используя стандартные инструменты платформы, но с полной кастомизацией под ваш дизайн.

В Битрикс Бизнес есть мощный модуль "Поиск", который поддерживает морфологию (поиск по разным формам слова), поиск по свойствам товаров и многое другое. Мы будем использовать его.

Основная идея:
1.  **Форма поиска** (`search.form` или `search.title`) размещается в "шапке" или другом сквозном элементе сайта.
2.  **Страница с результатами** (`search.page` или `catalog.search`) — это отдельная страница, на которую переходит пользователь после отправки формы.

### Шаг 1: Подготовка и настройка модуля "Поиск"

Прежде чем вставлять компоненты, убедитесь, что все готово для их работы.

1.  **Проверьте, установлен ли модуль "Поиск"**: Зайдите в админку: `Настройки -> Настройки продукта -> Модули`. Найдите модуль "Поиск" (search) и убедитесь, что он установлен.
2.  **Выполните переиндексацию**: Это самый важный шаг. Чтобы Битрикс "узнал" о ваших товарах, нужно проиндексировать контент.
    *   Перейдите в `Настройки -> Поиск -> Переиндексация`.
    *   Нажмите кнопку "Переиндексировать". Дождитесь окончания процесса.
3.  **Настройте область поиска (опционально, но рекомендуется)**: Чтобы поиск искал только по каталогу товаров, а не по всему сайту (статьи, новости), можно ограничить его.
    *   Зайдите в `Настройки -> Настройки продукта -> Настройки модулей -> Поиск`.
    *   На вкладке "Морфология" убедитесь, что стоит галочка "Использовать морфологию".
    *   На вкладке "Поиск" можно настроить веса для разных элементов, но для начала оставим по умолчанию.

### Шаг 2: Создание страницы для результатов поиска

Вам нужна отдельная страница, где будут выводиться найденные товары.

1.  Создайте новую страницу через структуру сайта. Например, `/search/index.php`.
2.  Откройте эту страницу в режиме редактирования PHP-кода и вставьте вызов компонента `bitrix:search.page`. Этот компонент будет принимать поисковый запрос и выводить результаты.

**Пример кода для `/search/index.php`:**

```php
<?
require($_SERVER["DOCUMENT_ROOT"]."/bitrix/header.php");
$APPLICATION->SetTitle("Результаты поиска");
?>

<?$APPLICATION->IncludeComponent(
	"bitrix:search.page", 
	".default", // Название вашего кастомного шаблона будет здесь
	array(
		"RESTART" => "Y", // Обязательно 'Y' для корректной работы
		"NO_WORD_LOGIC" => "Y",
		"USE_LANGUAGE_GUESS" => "N",
		"CHECK_DATES" => "Y",
		"arrFILTER" => array( // Фильтруем поиск только по инфоблоку каталога
			0 => "iblock_catalog", // Используйте "iblock_ТИП_ИНФОБЛОКА"
		),
		"arrFILTER_iblock_catalog" => array( // Укажите ID вашего инфоблока с товарами
			0 => "2", // Замените 2 на ID вашего инфоблока каталога
		),
		"USE_TITLE_RANK" => "N",
		"DEFAULT_SORT" => "rank",
		"FILTER_NAME" => "",
		"SHOW_WHERE" => "N", // Отключаем лишний фильтр "Где искать"
		"SHOW_WHEN" => "N",
		"PAGE_RESULT_COUNT" => "20", // Количество результатов на странице
		"CACHE_TYPE" => "A",
		"CACHE_TIME" => "3600",
		"DISPLAY_TOP_PAGER" => "Y",
		"DISPLAY_BOTTOM_PAGER" => "Y",
		"PAGER_TITLE" => "Результаты поиска",
		"PAGER_SHOW_ALWAYS" => "Y",
		"PAGER_TEMPLATE" => "round",
	),
	false
);?>

<?require($_SERVER["DOCUMENT_ROOT"]."/bitrix/footer.php");?>
```
**Ключевые параметры здесь:**
*   `arrFILTER`: Указывает, что искать нужно только в инфоблоках типа `catalog`.
*   `arrFILTER_iblock_catalog`: Уточняет, в каком именно инфоблоке (по ID) искать. **Обязательно замените `2` на ID вашего торгового каталога!**
*   `SHOW_WHERE`: Отключает стандартный выпадающий список "Где искать", который не нужен, если мы ищем только по товарам.

### Шаг 3: Размещение формы поиска в шаблоне сайта

Теперь нужно добавить саму форму, например, в шапку сайта.

1.  Откройте файл `header.php` вашего кастомного шаблона (`/local/templates/your_template/header.php`).
2.  Найдите место, где по дизайну должна быть форма поиска, и вставьте туда компонент `bitrix:search.form`.

**Пример кода для `header.php`:**

```php
<?$APPLICATION->IncludeComponent(
	"bitrix:search.form",
	"custom_search", // Название вашего кастомного шаблона
	Array(
		"PAGE" => "/search/", // Путь к странице с результатами, созданной на Шаге 2
		"USE_SUGGEST" => "N", // Пока отключим подсказки, о них ниже
	)
);?>
```
**Ключевой параметр:**
*   `PAGE`: Здесь нужно указать URL страницы, которую вы создали на предыдущем шаге. Именно туда будет отправлен поисковый запрос.

### Шаг 4: Кастомизация внешнего вида (самое главное)

Теперь сделаем так, чтобы поиск выглядел как на вашем макете, а не стандартно.

**Принцип Битрикса: не редактируйте стандартные шаблоны! Копируйте их.**

1.  **Кастомизация формы (`search.form`)**:
    *   Скопируйте папку шаблона компонента из `/bitrix/components/bitrix/search.form/templates/.default/`
    *   Вставьте ее по пути: `/local/templates/your_template/components/bitrix/search.form/custom_search/`
      (где `custom_search` — ваше название шаблона, которое вы указали в вызове компонента).
    *   Теперь редактируйте файлы в этой папке:
        *   `template.php`: Здесь находится HTML-разметка формы. Меняйте теги, классы, добавляйте иконки, плейсхолдеры — все, что нужно по вашему дизайну.
        *   `style.css`: Сюда пишите CSS-стили для вашей формы.

2.  **Кастомизация страницы результатов (`search.page`)**:
    *   Аналогично скопируйте шаблон из `/bitrix/components/bitrix/search.page/templates/.default/`
    *   Вставьте его по пути: `/local/templates/your_template/components/bitrix/search.page/custom_results/`
    *   В файле `/search/index.php` измените имя шаблона с `.default` на `custom_results`.
    *   В файле `template.php` скопированного шаблона вы найдете цикл `foreach($arResult["SEARCH"] as $arItem)`. Внутри этого цикла вы можете верстать карточку найденного товара так, как вам нужно. Вы можете получать цену, картинку и другие свойства товара, но для этого может потребоваться дополнительный вызов API Битрикса внутри цикла, например, `CIBlockElement::GetList` или `CCatalogProduct::GetOptimalPrice`.

### Шаг 5: Продвинутые возможности (живой поиск и фильтры)

#### Вариант А: "Живой" AJAX-поиск (с выпадающими подсказками)

Для этого используется компонент `bitrix:search.title`. Он заменяет `search.form`.

1.  В `header.php` вместо `search.form` вставьте `search.title`.
2.  Настройте его так, чтобы он искал только по каталогу.

**Пример кода `bitrix:search.title`:**
```php
<?$APPLICATION->IncludeComponent(
	"bitrix:search.title", 
	"visual_custom", // Имя вашего кастомного шаблона
	array(
		"NUM_CATEGORIES" => "1", // Одна категория поиска (Товары)
		"TOP_COUNT" => "5", // Количество подсказок в выпадающем списке
		"ORDER" => "date",
		"USE_LANGUAGE_GUESS" => "N",
		"CHECK_DATES" => "N",
		"SHOW_OTHERS" => "N",
		"PAGE" => "/search/", // Страница с полными результатами
		"CATEGORY_0_TITLE" => "Товары", // Название категории
		"CATEGORY_0" => array(
			0 => "iblock_catalog",
		),
		"CATEGORY_0_iblock_catalog" => array( // Указываем ID инфоблока каталога
			0 => "2", // Замените на ваш ID
		),
		"SHOW_INPUT" => "Y",
		"INPUT_ID" => "title-search-input",
		"CONTAINER_ID" => "title-search",
	),
	false
);?>
```
Кастомизация его шаблона аналогична: копируете шаблон (например, `visual`) и правите HTML/CSS/JS под свой дизайн. В его шаблоне уже есть JS-логика для AJAX-запросов.

#### Вариант Б: Поиск с умным фильтром (фасетный поиск)

Это более мощный вариант, который позволяет на странице результатов фильтровать товары по цене, бренду, размеру и другим свойствам.

Для этого лучше использовать связку компонентов **`catalog.search`** и **`catalog.smart.filter`**.

1.  **Страница результатов (`/search/index.php`)**:
    *   На нее помещаются два компонента: `catalog.smart.filter` (сам фильтр) и `catalog.search` (результаты).
    *   `catalog.search` удобнее `search.page`, так как он "заточен" под вывод именно товаров каталога и умеет работать с фильтром.

2.  **Форма поиска (`header.php`)**: Остается та же, `search.form` или `search.title`.

**Пример кода для `/search/index.php` с умным фильтром:**

```php
<?
// ... header.php ...

// 1. Умный фильтр
$APPLICATION->IncludeComponent(
    "bitrix:catalog.smart.filter",
    "custom_filter", // Ваш кастомный шаблон
    array(
        "IBLOCK_TYPE" => "catalog",
        "IBLOCK_ID" => "2", // ID вашего каталога
        "FILTER_NAME" => "searchFilter", // Важно! Имя глобальной переменной для фильтра
        "PRICE_CODE" => array("BASE"), // Тип цены
        "CACHE_TYPE" => "A",
        "CACHE_TIME" => "36000000",
        // ... другие настройки ...
    ),
    false
);

// 2. Результаты поиска
$APPLICATION->IncludeComponent(
    "bitrix:catalog.search",
    "custom_catalog_search", // Ваш кастомный шаблон
    array(
        "IBLOCK_TYPE" => "catalog",
        "IBLOCK_ID" => "2", // ID вашего каталога
        "FILTER_NAME" => "searchFilter", // Используем ту же переменную, что и в фильтре
        "ELEMENT_SORT_FIELD" => "sort",
        "ELEMENT_SORT_ORDER" => "asc",
        "PRICE_CODE" => array("BASE"),
        "SHOW_PRICE_COUNT" => "1",
        "PRICE_VAT_INCLUDE" => "Y",
        "PAGE_ELEMENT_COUNT" => "30",
        // ... другие настройки ...
        "RESTART" => "Y",
    ),
    false
);

// ... footer.php ...
?>
```

### Итог

Для базовой реализации в кастомном шаблоне:

1.  **Создайте страницу `/search/`** и разместите там компонент `search.page`, настроив его на поиск по инфоблоку каталога.
2.  **В `header.php` разместите `search.form`**, указав в параметре `PAGE` путь `/search/`.
3.  **Скопируйте шаблоны** обоих компонентов в папку вашего шаблона сайта (`/local/templates/your_template/components/bitrix/...`).
4.  **Отредактируйте HTML и CSS** в скопированных шаблонах под ваш дизайн.
5.  **Не забудьте сделать переиндексацию** после добавления новых товаров.

Начните с этого простого варианта. Как только он заработает, можно переходить к "живому" поиску (`search.title`) или к связке с умным фильтром.